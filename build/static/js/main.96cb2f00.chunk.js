(this["webpackJsonpuser-frontend-app"]=this["webpackJsonpuser-frontend-app"]||[]).push([[0],{239:function(e,t,n){},259:function(e,t){},382:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n(57),a=n.n(c),r=(n(239),n(5)),i=n(17),o=n(26),l=n(20),u=n(12),d=n.n(u),j=n(110),h=n(140),b=n.n(h),x="0242ac120003",m=function(e){return b.a.AES.encrypt(JSON.stringify(e),x).toString()},f=function(e){var t=b.a.AES.decrypt(e,x);try{return JSON.parse(t.toString(b.a.enc.Utf8))}catch(n){return null}},p=n(1),O=function(e){var t=e.flex,n=localStorage.getItem("userChecking"),c=f(n),a=Object(s.useState)([]),o=Object(r.a)(a,2),u=o[0],h=o[1],b=Object(s.useState)(!1),x=Object(r.a)(b,2),m=x[0],O=x[1];return Object(p.jsxs)("div",{className:"".concat(t,"  "),children:[Object(p.jsxs)("div",{className:"flex   h-16  rounded-2xl px-3  w-full justify-around items-center",children:[Object(p.jsx)("h1",{className:"mr-2 font-main text-pink text-4xl font-bold cursor-pointer",children:"skyline"}),Object(p.jsxs)("div",{className:" flex items-center rounded-full bg-white-100 px-4 ",children:[Object(p.jsx)(j.b,{size:"1.5rem",className:"text-dark-gray"}),Object(p.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value;if(0===t.replaceAll(" ","").length)return O(!1),void h((function(){return[]}));d.a.get("https://skyline.shuhaib.host/server/api/search/result?key=".concat(t),{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){var t=e.data.result;0==t.length?(O(!1),h((function(){return[]}))):(O(!0),h((function(){return Object(l.a)(t)})))}))}(e)},className:" px-4 py-2 text-pink bg-transparent focus:outline-none",placeholder:"search post, company..",type:"text"})]})]}),Object(p.jsx)("div",{className:"bg-pink   absolute  rounded-2xl p-4    w-1/4 ".concat(m?"":"hidden"),children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(p.jsx)(i.b,{to:"/user/profile/".concat(e._id),children:Object(p.jsxs)("div",{className:"flex items-center cursor-pointer rounded-full bg-white-100 p-2 m-2 space-x-3",children:[Object(p.jsx)("img",{src:e.photo,className:"w-8 h-8 rounded-full",alt:""}),Object(p.jsx)("h1",{children:e.username})]})},t)}))})]})},g=n(195),v=n(36),w=n(70),k=n(53),N=function(e){var t,n,c=e.flex,a=Object(s.useState)(!1),o=Object(r.a)(a,2),l=o[0],u=o[1],d=localStorage.getItem("userChecking"),j=f(d);return Object(p.jsx)("div",{className:"".concat(c,"   items-center rounded-full    w-full "),children:Object(p.jsxs)("div",{className:"flex rounded-2xl h-16   bg-dark-white  ml-4 shadow-md justify-around items-center w-full",children:[Object(p.jsxs)("div",{className:"".concat(l?"hidden":"flex"," duration-300  items-center justify-center space-x-4"),children:[Object(p.jsx)("img",{src:(null===(t=j.user)||void 0===t?void 0:t.photo)||"https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png",className:"rounded-full h-8 w-8",alt:""}),Object(p.jsx)("h3",{children:(null===(n=j.user)||void 0===n?void 0:n.username)||""})]}),Object(p.jsx)("div",{className:"".concat(l?"hidden":""," bg-white hover:bg-pink hover:text-white duration-200 p-2 cursor-pointer rounded-full text-pink"),onClick:function(){return u(!l)},children:Object(p.jsx)(g.a,{size:"1.5rem"})}),Object(p.jsxs)("div",{className:"".concat(l?"flex":"hidden"," duration-300 items-center justify-around px-4  w-full space-x-4"),children:[Object(p.jsxs)(i.b,{to:"profile",onClick:function(){return u(!l)},className:"flex items-center jusitfy-between ",children:[Object(p.jsx)(w.b,{size:"1.4rem",className:"mr-3 text-pink hover:text-dark-gray"}),"Profile"]}),Object(p.jsxs)(i.b,{className:"flex items-center jusitfy-between ",onClick:function(){return u(!l)},children:[Object(p.jsx)(w.c,{size:"1.4rem",className:"mr-3 text-pink  hover:text-dark-gray"}),"Settings"]}),Object(p.jsxs)(i.b,{to:"/logout",className:"flex items-center jusitfy-between  ",onClick:function(){return u(!l)},children:[Object(p.jsx)(v.e,{size:"1.4rem",className:"mr-3 text-pink  hover:text-dark-gray"}),"Logout"]}),Object(p.jsx)("div",{className:" bg-white hover:bg-pink hover:text-white duration-200 p-2 cursor-pointer rounded-full text-pink",onClick:function(){return u(!l)},children:Object(p.jsx)(k.a,{size:"1.5rem"})})]})]})})},y=n(196),C=n(73),S=function(e){var t=e.flex;return Object(p.jsx)("div",{className:"".concat(t," items-center  w-full shadow-md rounded-full"),children:Object(p.jsxs)("div",{className:"flex rounded-2xl h-16  text-dark-gray bg-dark-white  justify-around items-center w-full",children:[Object(p.jsx)(i.b,{to:"/",children:Object(p.jsx)("div",{className:"hover:bg-pink duration-300  ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:Object(p.jsx)(v.a,{size:"2rem"})})}),Object(p.jsx)(i.b,{to:"/following",children:Object(p.jsx)("div",{className:"hover:bg-pink duration-300  ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:Object(p.jsx)(y.a,{size:"2rem"})})}),Object(p.jsx)(i.b,{to:"/message",children:Object(p.jsxs)("div",{className:"group hover:bg-pink duration-300 relative ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:[Object(p.jsx)("span",{className:"p-0.5 absolute group-hover:bg-dark-gray duration-300  text-sm h-6 w-6 text-center text-white -top-1 -right-1 rounded-full bg-pink",children:"3"}),Object(p.jsx)(C.b,{size:"2rem"})]})}),Object(p.jsxs)("div",{className:"group hover:bg-pink duration-300 relative ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:[Object(p.jsx)("span",{className:"group-hover:bg-dark-gray p-0.5 duration-300  absolute text-sm h-6 w-6 text-center text-white -top-1 -right-1 rounded-full bg-pink",children:"3"}),Object(p.jsx)(k.b,{size:"2rem"})]})]})})},D=function(){return Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full z-40 items-center justify-between p-6 fixed top-0",children:[Object(p.jsx)(O,{flex:"flex-1"}),Object(p.jsx)(S,{flex:"flex-3"}),Object(p.jsx)(N,{flex:"flex-1"})]})},I=n(18),A=n(25),z=(n(103),n(8)),_=n(469),P=n(198),E=n.n(P),F=n(199),B=n.n(F),U=n(467),H=n(470),L=n(129),T=n.n(L),M=n(130),R=n.n(M),W=n(463),V=n(464),q=n(457),G=n(445),J={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4};function K(e){var t=e.open,n=e.setOpen,s=e.data;return Object(p.jsx)("div",{children:Object(p.jsx)(q.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:function(){return n(!1)},closeAfterTransition:!0,BackdropComponent:W.a,BackdropProps:{timeout:500},children:Object(p.jsx)(G.a,{in:t,children:Object(p.jsx)(V.a,{sx:J,children:Object(p.jsx)("img",{src:s.imageLink,alt:""})})})})})}var Q=Object(z.a)("input")({display:"none"}),Z=function(e){var t=e.existStory,n=e.setUserStory,c=localStorage.getItem("userChecking"),a=f(c),i=Object(s.useRef)(null),o=Object(s.useState)(""),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(s.useState)(""),b=Object(r.a)(h,2),x=b[0],m=b[1],O=Object(p.jsx)(_.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(p.jsx)(E.a,{onClick:function(){i.current.click()}})}),g=Object(p.jsxs)(H.a,{variant:"outlined",children:[Object(p.jsx)(U.a,{onClick:function(){return function(){var e=new FormData;e.append("file",u),d.a.post("https://skyline.shuhaib.host/server/api/user/story/update",e,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){n(e.data.story)})).catch((function(e){console.log(e)}))}()},children:Object(p.jsx)(T.a,{})}),Object(p.jsx)(U.a,{onClick:function(){j(null),m(null)},color:"error",children:Object(p.jsx)(R.a,{})})]}),v=Object(s.useState)(!1),w=Object(r.a)(v,2),k=w[0],N=w[1],y=function(){return N(!0)};return t?Object(p.jsxs)("div",{className:"",children:[Object(p.jsxs)("div",{onClick:function(){y()},children:[Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:t.imageLink,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""}),Object(p.jsx)(_.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(p.jsx)(B.a,{onClick:function(){return console.log("this is deleter funtion"),void d.a.delete("https://skyline.shuhaib.host/server/api/user/delete/story",{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){n(null),j(null),m(null)})).catch((function(e){console.log(e.data)}))}})})]}),t&&Object(p.jsx)(K,{data:t,open:k,setOpen:N,handleOpen:y})]}):Object(p.jsx)("div",{className:"",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:x,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""}),Object(p.jsx)(Q,{accept:"image/*",ref:i,onChange:function(e){var t=e.target.files[0];j(t);var n=URL.createObjectURL(t);m(n)},id:"icon-button-file",type:"file"}),x?g:O]})})},Y=n(471),X=function(e){var t=e.data,n=Object(s.useState)(!1),c=Object(r.a)(n,2),a=c[0],i=c[1],o=function(){return i(!0)};return Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)("div",{onClick:function(){o()},children:Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:t.imageLink,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""})}),t&&Object(p.jsx)(K,{data:t,open:a,setOpen:i,handleOpen:o})]})},$=function(){var e=localStorage.getItem("userChecking"),t=f(e),n=Object(s.useState)(null),c=Object(r.a)(n,2),a=c[0],i=c[1],o=Object(s.useState)([]),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(s.useState)(!0),b=Object(r.a)(h,2),x=b[0],m=b[1];Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/get/all/stories",{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){var t=e.data.userStory,n=e.data.userFollowingStory;i(t),j(n),m(!1)})).catch((function(e){console.log(e)}))}),[]);var O=Object(s.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1];return Object(p.jsx)("div",{className:"flex relative duration-400 ".concat(v?"overflow-x-auto":"overflow-x-hidden"," scroll-touch flex-row items-center justify-start space-x-4 cursor-pointer"),onMouseEnter:function(){w(!v)},onMouseLeave:function(){w(!v)},children:Object(p.jsx)("div",{className:"w-20 p-5",children:Object(p.jsx)("div",{className:"flex space-x-3   w-max ",children:x?Object(p.jsx)(Y.a,{}):Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)(Z,{existStory:a,setUserStory:i})," ",null===u||void 0===u?void 0:u.map((function(e){return Object(p.jsx)(X,{data:e},e._id)}))]})})})})},ee=n(61),te=n.n(ee),ne=n(458),se=n(454),ce=n(468),ae=n(76),re=n.n(ae),ie=n(131),oe=n.n(ie),le=function(e){var t=e.setPosts,n=localStorage.getItem("userChecking"),c=f(n),a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=i[0],u=i[1],h=Object(s.useRef)(null),b=Object(s.useRef)(null),x=Object(s.useRef)(null),m=Object(s.useRef)(null),O=Object(s.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1],k=Object(s.useState)(),N=Object(r.a)(k,2),y=N[0],S=N[1],D=Object(s.useState)(!1),I=Object(r.a)(D,2),z=I[0],_=I[1],P=Object(s.useState)(!1),E=Object(r.a)(P,2),F=E[0],B=E[1],H=Object(s.useState)(!1),L=Object(r.a)(H,2),T=L[0],M=L[1],R=Object(s.useRef)(null),W=Object(s.useState)(""),V=Object(r.a)(W,2),q=V[0],G=V[1],J=Object(s.useState)("public"),K=Object(r.a)(J,2),Q=K[0],Z=K[1];return Object(p.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mt-6 mb-5",children:[Object(p.jsx)(A.a,{}),Object(p.jsxs)("div",{className:"p-6",children:[Object(p.jsxs)("div",{className:"flex space-x-3 items-center",children:[Object(p.jsx)("img",{src:c.user.photo,className:"h-9 w-9 rounded-full",alt:""}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:c.user.username}),Object(p.jsxs)("select",{value:Q,title:"asa",onChange:function(e){Z(e.target.value)},children:[Object(p.jsx)("option",{value:"public",selected:!0,children:"Public"}),Object(p.jsx)("option",{value:"onlyme",children:"Only me"})]})]})]}),Object(p.jsxs)("div",{className:"mt-3",children:[Object(p.jsxs)("div",{className:"flex flex-col",children:[Object(p.jsx)("input",{type:"text",placeholder:"title",className:"h-4 p-4 m-2 outline-none",ref:x}),Object(p.jsx)("textarea",{type:"text",placeholder:"Content",className:" p-4 m-2 outline-none resize-none",rows:"",ref:m}),Object(p.jsx)("hr",{})]}),Object(p.jsxs)("div",{className:"flex items-center justify-center p-2  ",children:[F&&Object(p.jsx)("img",{className:"h-96 w-atuo",src:y,alt:"postImages"}),z&&Object(p.jsx)(re.a,{url:y,controls:!0})]}),Object(p.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"flex space-x-4 text-xl mt-3 capitalize",children:[Object(p.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){h.current.click()},children:[Object(p.jsx)(j.a,{style:{color:"#FF005C"},size:"1.7rem"}),Object(p.jsx)("p",{children:"photos"}),Object(p.jsx)("input",{type:"file",ref:h,onChange:function(e){!function(e){if(e.target.files[0]){_(!1),B(!0),w(!0);var t=e.target.files[0],n=URL.createObjectURL(t);S(n)}}(e)},accept:"image/*",hidden:!0})]}),Object(p.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){b.current.click()},children:[Object(p.jsx)(j.c,{style:{color:"#4CAF50"},size:"1.7rem"}),Object(p.jsx)("p",{children:"Video "}),Object(p.jsx)("input",{type:"file",hidden:!0,ref:b,onChange:function(e){!function(e){if(e.target.files[0]){_(!0),B(!1),w(!0);var t=e.target.files[0],n=URL.createObjectURL(t);S(n)}}(e)},accept:"video/*"})]}),Object(p.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){M(!T)},children:[Object(p.jsx)(C.c,{style:{color:"#FF005C"},size:"1.7rem"}),Object(p.jsx)("p",{children:"Tag "})]})]})}),Object(p.jsxs)("div",{className:"space-x-4 ".concat(o&&"hidden"),children:[v&&Object(p.jsx)(U.a,{variant:"contained",color:"secondary",onClick:function(){w(!1),_(!1),B(!1),S("")},endIcon:Object(p.jsx)(oe.a,{}),children:"Cancel"}),Object(p.jsx)(U.a,{variant:"contained",style:{backgroundColor:"#FF005C"},onClick:function(){!function(){var e,n=x.current.value,s=m.current.value,a=q,r=n.replace(" ",""),i=s.replace(" ","");if(0==r||0==i)return alert("please Enter some data"),!0;F?e=h.current.files[0]:z&&(e=b.current.files[0]),u(!0);var o=new FormData;o.append("title",n),o.append("content",s),o.append("tags",a),o.append("privacy",Q),o.append("media",e),d.a.post(" https://skyline.shuhaib.host/server/api/post/uploading",o,{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){"public"==Q&&t((function(t){var n=[e.data.post].concat(Object(l.a)(t));return console.log(n),n})),Object(A.b)("Post Succesfully updated !"),x.current.value="",m.current.value="",w(!1),_(!1),B(!1),S(""),u(!1)})).catch((function(e){Object(A.b)("Try Again Later !"),x.current.value="",m.current.value="",w(!1),_(!1),B(!1),S(""),u(!1),console.log(e)}))}()},endIcon:Object(p.jsx)(te.a,{}),children:"Send"})]})]})]}),Object(p.jsx)("div",{className:"mt-5 px-5 ".concat(o?"":"hidden"),children:Object(p.jsx)(ce.a,{color:"success"})})]}),Object(p.jsx)(ne.a.Root,{show:T,as:s.Fragment,children:Object(p.jsx)(se.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:R,onClose:M,children:Object(p.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(p.jsx)(ne.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(p.jsx)(se.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(p.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(p.jsx)(ne.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(p.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(p.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(p.jsx)("div",{className:"sm:flex sm:items-start",children:Object(p.jsxs)("div",{className:"mt-3 text-center sm:mt-0  w-full sm:ml-4 sm:text-left",children:[Object(p.jsx)(se.a.Title,{as:"h3",className:"text-lg leading-6  font-medium text-gray-900",children:"Add Your Tags with comma"}),Object(p.jsx)("div",{className:"mt-2 ",children:Object(p.jsx)("input",{value:q,onChange:function(e){var t=e.target.value;G(t)},type:"text",placeholder:"add your text with comma",className:"outline-none w-full "})})]})})}),Object(p.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(p.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){M(!1)},children:"Add"}),Object(p.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){G(""),M(!1)},ref:R,children:"Cancel"})]})]})})]})})})]})},ue=n(114),de=n.n(ue),je=n(133),he=n.n(je),be=n(134),xe=n.n(be),me=n(135),fe=n.n(me),pe=n(136),Oe=n.n(pe),ge=n(461),ve=n(213),we=n(459),ke={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxHeight:700,overflow:"auto",bgcolor:"background.paper",boxShadow:24,p:4};function Ne(e){var t=e.commentMOdalOpen,n=e.commentMOdalClose,s=e.comments;return Object(p.jsx)("div",{children:Object(p.jsx)(q.a,{open:t,onClose:function(){n()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsx)(V.a,{sx:ke,children:s.map((function(e,t){return Object(p.jsx)("div",{className:" p-2 ",children:Object(p.jsx)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:Object(p.jsxs)("div",{className:"flex space-x-2",children:[Object(p.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQijG7DrhwuN3-8ccFfUJVOeHA3NojRTA9rECPbCX7wg-NY4KgnDbK_9vZO2c0ARCN3k8Q&usqp=CAU",className:"w-8 h-8 rounded-full",alt:""}),Object(p.jsx)("p",{className:"text-sm  ",children:e.comment})]})})},t)}))})})})}var ye=function(e){var t,n,c=e.postData,a=e.deletePost,o=e.editPost,u=Object(s.useState)(c),j=Object(r.a)(u,2),h=j[0],b=j[1],x=localStorage.getItem("userChecking"),m=f(x),O=c.comments||[],g=Object(s.useState)(O),v=Object(r.a)(g,2),w=v[0],k=v[1],N=Object(s.useState)(),y=Object(r.a)(N,2),C=y[0],S=y[1],D=Object(s.useState)(!1),z=Object(r.a)(D,2),_=z[0],P=z[1],E=function(){P(!0)},F=Object(s.useState)(null),B=Object(r.a)(F,2),U=B[0],H=B[1],L=Boolean(U),T=Object(s.useState)(null),M=Object(r.a)(T,2),R=M[0],W=M[1],V=Boolean(R),q=function(e){W(e.currentTarget)},G=function(e){W(null)},J=function(){H(null)},K=function(){d.a.put("https://skyline.shuhaib.host/server/api/post/dislike/".concat(h._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){b((function(e){var t=e.like.filter((function(e){return e!==m.user._id}));return Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},Q=function(){d.a.put("https://skyline.shuhaib.host/server/api/post/like/".concat(h._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){b((function(e){var t=Object(l.a)(e.like);return t.push(m.user._id),Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},Z=Object(s.useRef)(null);Object(s.useEffect)((function(){Z&&Z.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[w]);var Y;return Object(p.jsxs)("div",{children:[Object(p.jsx)(A.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(p.jsxs)("div",{className:"shadow  rounded-2xl mb-10 p-4",children:[Object(p.jsxs)("div",{className:"p-3 flex justify-between items-center ",children:[Object(p.jsx)(i.b,{to:"/user/profile/".concat(c.user),children:Object(p.jsxs)("div",{className:" space-x-4 flex items-center",children:[Object(p.jsx)("img",{src:(null===(t=c.userDetails)||void 0===t?void 0:t.photo)||"http://www.londondentalsmiles.co.uk/wp-content/uploads/2017/06/person-dummy.jpg",className:"w-12 h-12  rounded-full",alt:""}),Object(p.jsxs)("div",{className:"text-sm text-dark-gray",children:[Object(p.jsx)("p",{children:null===c||void 0===c||null===(n=c.userDetails)||void 0===n?void 0:n.username}),function(e){var t=(new Date).toDateString(),n=new Date(e).toDateString(),s=new Date(e).toLocaleTimeString();return t==n?Object(p.jsx)("p",{children:"Today ".concat(s)}):Object(p.jsx)("p",{children:n})}(h.date)]})]})}),Object(p.jsx)(de.a,{onClick:function(e){H(e.currentTarget)},"ria-haspopup":"true","aria-expanded":L?"true":void 0,className:"cursor-pointer"}),Object(p.jsx)(ve.a,{anchorEl:U,open:L,onClose:J,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:(Y=h,Y.user==m.user._id?[Object(p.jsx)(we.a,{onClick:function(){J(),a(Y._id)},children:"Delete"}),Object(p.jsx)(we.a,{onClick:function(){J(),o(Y)},children:"Edit"})]:Object(p.jsx)(we.a,{onClick:J,children:"Report"}))})]}),Object(p.jsxs)("div",{className:"p-4  mb-4",children:[Object(p.jsx)("h1",{className:"text-lg mb-2",children:h.title}),Object(p.jsx)("p",{className:"text-gray-700",children:h.content})]}),h.videoType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)(re.a,{controls:!0,width:"100%",url:h.mediaLink})}):h.imageType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)("img",{src:h.mediaLink,alt:""})}):void 0,Object(p.jsxs)("div",{className:"flex justify-between  p-4",children:[Object(p.jsxs)("div",{className:"space-x-3 text-3xl ",children:[function(e){var t=e.length;return-1!==e.findIndex((function(e){return e==m.user._id}))?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(he.a,{className:"cursor-pointer ",color:"error",fontSize:"string",onClick:function(){return K()}}),Object(p.jsx)("span",{className:"text-sm",children:t})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xe.a,{className:"cursor-pointer ",fontSize:"string",onClick:function(){return Q()}}),Object(p.jsx)("span",{className:"text-sm",children:t})]})}(h.like),Object(p.jsx)(fe.a,{className:"cursor-pointer",fontSize:"string",onClick:function(){return E()}}),Object(p.jsx)("span",{className:"text-sm cursor-pointer",onClick:function(){return E()},children:"View All"})]}),Object(p.jsx)(Oe.a,{className:"cursor-pointer text-3xl",fontSize:"string"})]}),Object(p.jsx)("div",{className:" max-h-40 overflow-auto",ref:Z,children:w.map((function(e,t){return Object(p.jsx)("div",{className:" p-2 ",children:Object(p.jsxs)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:[Object(p.jsxs)("div",{className:"flex space-x-2",children:[Object(p.jsx)("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQijG7DrhwuN3-8ccFfUJVOeHA3NojRTA9rECPbCX7wg-NY4KgnDbK_9vZO2c0ARCN3k8Q&usqp=CAU",className:"w-8 h-8 rounded-full",alt:""}),Object(p.jsx)("p",{className:"text-sm  ",children:e.comment})]}),Object(p.jsx)(ve.a,{anchorEl:R,open:V,onClose:G,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(p.jsx)(we.a,{onClick:function(){G(),function(e){d.a.put("https://skyline.shuhaib.host/server/api/delete/comment/".concat(c._id,"/").concat(e._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(t){A.b.success("Comment Deleted !",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),k((function(t){return t.filter((function(t){return t._id!==e._id}))}))}))}(e)},children:"Delete"})}),e.user==m.user._id&&Object(p.jsx)(de.a,{className:"cursor-pointer",onClick:q})]})},t)}))}),Object(p.jsxs)("div",{className:"w-full p-4 flex items-center",children:[Object(p.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Leave a comment",variant:"standard",value:C,onChange:function(e){return S(e.target.value)}}),Object(p.jsx)(te.a,{className:"cursor-pointer ",onClick:function(){return function(e){console.log(e),C.replaceAll(" ","").length>1&&d.a.put("https://skyline.shuhaib.host/server/api/post/add/comment/".concat(e._id),{comment:C},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){var t=e.data.result;S(""),k((function(e){return[].concat(Object(l.a)(e),[t])}))})).catch((function(e){console.log(e)}))}(c)}})]})]}),Object(p.jsx)(Ne,{commentMOdalOpen:_,commentMOdalClose:function(){P(!1)},comments:w})]})},Ce={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4};function Se(e){var t=e.editMOdalOpen,n=e.editModalClose,c=e.modalData,a=e.updatePost,i=Object(s.useState)(c.title),o=Object(r.a)(i,2),l=o[0],u=o[1],d=Object(s.useState)(c.content),j=Object(r.a)(d,2),h=j[0],b=j[1];return Object(p.jsx)("div",{children:Object(p.jsx)(q.a,{open:t,onClose:function(){n()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsx)(V.a,{sx:Ce,children:Object(p.jsxs)("div",{className:"space-y-3",children:[Object(p.jsxs)("div",{className:"space-y-3 w-full",children:[Object(p.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Title",value:l,onChange:function(e){return u(e.target.value)},variant:"standard"}),Object(p.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Description",value:h,onChange:function(e){return b(e.target.value)},variant:"standard"})]}),Object(p.jsx)("div",{children:function(){if(c)return c.videoType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)(re.a,{controls:!0,width:"100%",url:c.mediaLink})}):c.imageType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)("img",{src:c.mediaLink,alt:""})}):void 0}()}),Object(p.jsxs)("div",{className:"flex justify-end  space-x-4 p-4",children:[Object(p.jsx)("button",{className:"px-5 py-2 bg-red-600 text-white rounded-full hover:bg-white-100 hover:text-dark-gray  transition duration-400 ",onClick:function(){return n()},children:" Cancel"}),Object(p.jsx)("button",{className:"px-5 py-2 bg-dark-gray text-white  hover:bg-dark hover:text-white transition duration-300 rounded-full ",onClick:function(){a({title:l,content:h,postId:c._id})},children:"  update"})]})]})})})})}var De=function(e){var t,n=e.flex,c=localStorage.getItem("userChecking"),a=f(c),i=Object(s.useState)([]),o=Object(r.a)(i,2),l=o[0],u=o[1],j=Object(s.useState)(!1),h=Object(r.a)(j,2),b=h[0],x=h[1],m=Object(s.useState)(null),O=Object(r.a)(m,2),g=O[0],v=O[1],w=function(){v(null),x(!1)};Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/logged/get/all/post",{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){u(e.data.data)})).catch((function(e){console.log(e.data)}))}),[]);var k=function(e){d.a.delete("https://skyline.shuhaib.host/server/api/post/delete/".concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(t){A.b.success("Post Successfully Deleted",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0});var n=l.filter((function(t){return t._id!==e}));console.log("deleted and balanced ",n),u(n)})).catch((function(e){console.log(e)}))},N=function(e){v(e),x(!0)};return Object(p.jsxs)("div",{className:"".concat(n," min-h-withoutHeader  w-full"),children:[Object(p.jsx)(A.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(p.jsxs)("div",{className:"p-6 ml-6 w-full  ",children:[Object(p.jsx)($,{}),(null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t.constructorPower)&&Object(p.jsx)(le,{setPosts:u}),(null===l||void 0===l?void 0:l.length)>0&&l.map((function(e){return Object(p.jsx)(ye,{postData:e,deletePost:k,editPost:N},e._id)}))]}),g&&Object(p.jsx)(Se,{updatePost:function(e){d.a.put("https://skyline.shuhaib.host/server/api/post/edit/".concat(e.postId),e,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(t){A.b.success("Post Successfully Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0});var n=l.map((function(t){return t._id==e.postId?Object(I.a)({title:e.title,content:e.content},t):t}));u(n),w()})).catch((function(e){console.log(e)}))},editMOdalOpen:b,editModalClose:w,modalData:g})]})},Ie=n(24),Ae=n.n(Ie),ze=n(42),_e=(n(201),n(200),Object(s.createContext)(null)),Pe=function(e){e.currentUser;var t=e.conv,n=(e.getMessage,localStorage.getItem("userChecking")),c=f(n),a=Object(s.useContext)(_e).changeChattingDetails,i=Object(s.useState)(null),o=Object(r.a)(i,2),l=o[0],u=o[1];Object(s.useEffect)((function(){var e=t.members.find((function(e){return e!==c.user._id})),n=function(){var t=Object(ze.a)(Ae.a.mark((function t(){var n;return Ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://skyline.shuhaib.host/server/api/get/user/details/".concat(e),{headers:{Authorization:"Bearer ".concat(c.token)}});case 2:n=t.sent,u(n.data.user);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n()}),[]);var j=function(){var e=Object(ze.a)(Ae.a.mark((function e(t){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://skyline.shuhaib.host/server/api/get/meesages/".concat(t._id),{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){var n={conversation:t,user:l,message:e.data.result};a(n)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:function(){return j(t)},children:[Object(p.jsxs)("div",{className:"flex space-x-4 items-center",children:[l&&Object(p.jsx)("img",{src:l.photo||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQijG7DrhwuN3-8ccFfUJVOeHA3NojRTA9rECPbCX7wg-NY4KgnDbK_9vZO2c0ARCN3k8Q&usqp=CAU",className:"h-8 w-8 rounded-full",alt:""}),l&&Object(p.jsx)("h1",{children:l.username})]}),l&&Object(p.jsx)(v.b,{color:"green"})]})},Ee=function(e){var t=e.conversation;return Object(p.jsx)("div",{className:"p-6 mt-3 overscroll-auto ",children:Object(p.jsx)("div",{className:"flex space-y-4 pb-4 flex-col",children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(p.jsx)(Pe,{conv:e},t)}))})})},Fe=function(e){var t=e.flex,n=Object(s.useState)([]),c=Object(r.a)(n,2),a=c[0],i=c[1],o=localStorage.getItem("userChecking"),l=f(o);return Object(s.useEffect)((function(){var e=function(){var e=Object(ze.a)(Ae.a.mark((function e(){var t;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("https://skyline.shuhaib.host/server/api/get/conversation",{headers:{Authorization:"Bearer ".concat(l.token)}});case 3:t=e.sent,i(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsx)("div",{className:"min-h-withoutHeader bg-white-100  p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(p.jsxs)("div",{className:" h-96 p-4",children:[Object(p.jsx)("h1",{className:"uppercase text-xl mt-6 font-semibold text-dark-gray ",children:"Networks"}),Object(p.jsx)(Ee,{conversation:a})]})})})},Be=n(214),Ue=function(e){var t=e.own,n=e.m;return Object(p.jsxs)("div",{className:" flex flex-col ".concat(t?" justify-end items-end  ":"justify-start items-start "),children:[Object(p.jsx)("div",{className:"   rounded-2xl m-3 p-3  ".concat(t?"justify-end   rounded-br-none bg-white shadow  ":"rounded-bl-none bg-pink text-white"),children:Object(p.jsx)("div",{className:"pl-3 ",children:Object(p.jsx)("p",{children:n.text})})}),Object(p.jsx)("p",{className:"".concat(t?" mr-3":"text-left ml-3"," text-sm"),children:Object(Be.a)(n.createdAt)})]})},He=n(139),Le=function(e){e.closeChatBox,e.chattingData;var t=localStorage.getItem("userChecking"),n=f(t),c=Object(s.useContext)(_e),a=c.chatDetails,i=c.changeChattingDetails,o=Object(s.useState)(""),u=Object(r.a)(o,2),j=u[0],h=u[1],b=Object(s.useRef)(null),x=Object(s.useState)(a.message),m=Object(r.a)(x,2),O=m[0],g=m[1];Object(s.useEffect)((function(){g(a.message)}),[]),Object(s.useEffect)((function(){b&&b.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[]);var v=Object(s.useState)(null),w=Object(r.a)(v,2),k=w[0],N=w[1],y=Object(s.useRef)();Object(s.useEffect)((function(){y.current=Object(He.a)("wss://skyline.shuhaib.host/websocket",{transports:["websocket"],rejectUnauthorized:!1}),y.current.on("getMessage",(function(e){N({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(s.useEffect)((function(){k&&a.user._id==k.sender&&g((function(e){return[].concat(Object(l.a)(e),[k])}))}),[k]),Object(s.useEffect)((function(){y.current.emit("addUser",n.user._id),y.current.on("getUser",(function(e){}))}),[]);var C=function(){var e=Object(ze.a)(Ae.a.mark((function e(t){var s,c;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={conversationId:a.conversation._id,sender:n.user._id,text:j},e.prev=2,e.next=5,d.a.post("https://skyline.shuhaib.host/server/api/post/meesages",s,{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:c=e.sent,y.current.emit("sendMessage",{senderId:n.user._id,reciverId:a.user._id,text:j}),g((function(e){return[].concat(Object(l.a)(e),[c.data])})),h(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"p-4  ",children:[Object(p.jsxs)("div",{className:"flex items-center justify-between",children:[Object(p.jsxs)("div",{className:"flex items-center space-x-3  ",children:[Object(p.jsx)("img",{src:a.user.photo,className:"rounded-full w-14 h-14",alt:""}),Object(p.jsx)("h1",{children:a.user.username}),Object(p.jsx)("p",{className:"animate-bounce text-sm text-gray-400",children:"typing.."})]}),Object(p.jsx)(_.a,{onClick:function(){return i(null)},children:Object(p.jsx)(oe.a,{className:"text-pink"})})]}),Object(p.jsx)("hr",{className:"mt-3"}),Object(p.jsx)("div",{className:"h-56 overflow-auto px-4 ",ref:b,children:O.map((function(e,t){return Object(p.jsx)(Ue,{m:e,own:a.user._id!==e.sender},t)}))}),Object(p.jsx)("div",{className:"  flex w-auto items-center  ",children:Object(p.jsxs)("form",{className:"flex bg-white shadow  h-24 p-2 items-center w-full h-auto rounded-full",onSubmit:C,children:[Object(p.jsx)("input",{type:"text",value:j,onChange:function(e){return h(e.target.value)},className:"w-full   outline-none ml-7 ",style:{background:"none"}}),Object(p.jsx)("button",{className:"p-3 p-x-6  text-white bg-pink rounded-full",children:"Send"})]})})]})},Te=n(84),Me=n.n(Te),Re=n(78),We=n.n(Re),Ve=function(e){var t=e.data,n=(e.changeState,localStorage.getItem("userChecking")),c=f(n),a=Object(s.useState)(!1),i=Object(r.a)(a,2),o=i[0],l=i[1],u=Object(s.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1];return Object(p.jsxs)("div",{className:"flex justify-between items-center bg-white-100 p-4 rounded-2xl",children:[Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:t.photo,className:"h-10 w-10 rounded-full",alt:""}),Object(p.jsx)("h3",{children:t.username}),h?Object(p.jsx)(Y.a,{color:"success"}):Object(p.jsx)(_.a,{children:o?Object(p.jsx)(We.a,{color:"error",onClick:function(){return e=t._id,b(!0),void d.a.put("https://skyline.shuhaib.host/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){b(!1),l(!1)})).catch((function(e){b(!1)}));var e}}):Object(p.jsx)(Me.a,{onClick:function(){return e=t._id,b(!0),void d.a.put("https://skyline.shuhaib.host/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){b(!1),l(!0)})).catch((function(e){b(!1),console.log(e)}));var e},className:!0})})]})},qe=function(){var e=localStorage.getItem("userChecking"),t=f(e),n=Object(s.useState)([]),c=Object(r.a)(n,2),a=c[0],i=c[1];return Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/suggested/user",{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){i(e.data.users)})).catch((function(e){console.log(e)}))}),[]),Object(p.jsx)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48 overflow-auto",children:0==(null===a||void 0===a?void 0:a.length)?Object(p.jsx)("p",{children:"NO Suggession"}):null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)(Ve,{data:e,changeState:i},e._id)}))})},Ge=function(e){var t=e.flex,n=localStorage.getItem("userChecking"),c=(f(n),Object(s.useContext)(_e)),a=c.chatDetails,r=c.changeChattingDetails;return Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(p.jsxs)("div",{className:"",children:[Object(p.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Recomended Poepole"}),Object(p.jsx)(qe,{})]}),Object(p.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(p.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(p.jsxs)("div",{className:" px-6  ",children:[Object(p.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(k.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(p.jsx)(i.b,{to:"/",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(p.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(p.jsx)(i.b,{to:"/following",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]})]}),a&&Object(p.jsx)("div",{className:"px-4 fixed bg-white-100 h-96 bottom-10 rounded-2xl w-1/4 right-10",children:Object(p.jsx)(Le,{closeChatBox:r,chattingData:a})})]})})},Je=function(){var e,t=Object(o.g)(),n=localStorage.getItem("userChecking");return n&&(e=f(n)),e?Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Fe,{flex:"flex-1"}),Object(p.jsx)(De,{flex:"flex-3"}),Object(p.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},Ke=n(4),Qe=n(453),Ze=n(205),Ye=n(455),Xe=n(452),$e=n(206),et=n.n($e),tt=n(207),nt=n.n(tt),st=Object(p.jsx)(et.a,{fontSize:"small"}),ct=Object(p.jsx)(nt.a,{fontSize:"small"});function at(e){var t=e.locationDetails,n=e.prefferdlocationDataCheck,c=Object(s.useState)([]),a=Object(r.a)(c,2),i=a[0],o=a[1],l=function(){var e=Object(ze.a)(Ae.a.mark((function e(t){return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Ze.geocodeByAddress)(t).then((function(e){o(e[0].address_components)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(Xe.a,{onChange:function(e,n){t((function(e){return Object(I.a)(Object(I.a)({},e),{},{preferredLocation:n.map((function(e){return e.long_name}))})}))},multiple:!0,id:"checkboxes-tags-demo",options:i,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.long_name},renderOption:function(e,t,n){var s=n.selected;return Object(p.jsxs)("li",Object(I.a)(Object(I.a)({},e),{},{children:[Object(p.jsx)(Ye.a,{icon:st,checkedIcon:ct,style:{marginRight:8},checked:s}),t.long_name]}))},style:{width:500},renderInput:function(e){return Object(p.jsx)(ge.a,Object(I.a)(Object(I.a)({error:n},e),{},{label:"Select Prefered Locations",placeholder:"Locations",onChange:function(e){l(e.target.value)}}))}})}var rt=n(212),it=n(475),ot=n(72),lt=n.n(ot),ut=Object(s.createContext)(null),dt=n(208),jt=Object(Qe.a)((function(e){return{inputfull:{width:"90%","& label.Mui-focused":{color:"#152D35"}},textColor:{"& label.Mui-focused":{color:"#152D35"}}}})),ht=Object(rt.a)({palette:{primary:{main:"#9D9D9D"}}}),bt=function(){var e=Object(o.g)(),t=Object(s.useContext)(ut).setUserDataFromServer,n=jt(),c=Object(s.useState)(!0),a=Object(r.a)(c,2),i=a[0],l=a[1],u=Object(s.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(s.useState)(!1),O=Object(r.a)(x,2),g=O[0],v=O[1],w=Object(s.useState)(!1),k=Object(r.a)(w,2),N=k[0],y=k[1],S=Object(s.useState)(!1),D=Object(r.a)(S,2),A=D[0],z=D[1],_=Object(s.useState)(!1),P=Object(r.a)(_,2),E=P[0],F=P[1],B=Object(s.useState)(!1),H=Object(r.a)(B,2),L=H[0],T=H[1],M=Object(s.useState)({username:"",email:"",phone:"",password:"",confirmPassword:"",preferredLocation:""}),R=Object(r.a)(M,2),W=R[0],V=R[1],q=function(e){var t=e.target.name,n=e.target.value;V((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Ke.a)({},t,n))}))},G=Object(s.useState)(),J=Object(r.a)(G,2),K=J[0],Q=J[1],Z=Object(s.useState)(""),Y=Object(r.a)(Z,2),X=Y[0],$=Y[1],ee=Object(s.useState)(!1),ne=Object(r.a)(ee,2),se=ne[0],ae=ne[1],re=Object(s.useState)({email:"",password:""}),ie=Object(r.a)(re,2),oe=ie[0],le=ie[1],ue=localStorage.getItem("userChecking");if(ue&&f(ue))return e.push("/"),!0;return Object(p.jsx)(it.a,{theme:ht,children:Object(p.jsxs)("div",{className:"flex",children:[Object(p.jsx)("div",{className:"flex-1 h-screen bg-signin relative bg-cover bg-no-repeat",children:Object(p.jsxs)("div",{className:" ".concat(i?"bg-pink bg-opacity-60":"bg-black bg-opacity-60"," text-center flex items-center  flex-col  justify-center space-y-5 h-screen w-full absolute top-0 left-0 p-6"),children:[Object(p.jsx)("h1",{className:"text-white font-main text-5xl",children:"Skyline"}),Object(p.jsxs)("h1",{className:"text-white text-3xl ",children:[" ",i?"Open":"Hurry up !"," ",Object(p.jsx)("br",{})," Door to Your Greate Dream"]})]})}),Object(p.jsx)("div",{className:"flex-3 bg-white-100 ",children:i?Object(p.jsx)("div",{className:"relative flex justify-center",children:Object(p.jsxs)("div",{className:" flex items-center w-1/2   relative flex-col justify-center  space-y-5 h-screen p-6",children:[Object(p.jsxs)("h1",{className:"text-2xl",children:[" ","Sign In to"," ",Object(p.jsx)("span",{className:"text-pink capitalize font-bold",children:"skyline"})," "]}),Object(p.jsx)("div",{className:"w-1/2 rounded-full ".concat(L?"":"hidden"),children:Object(p.jsx)(ce.a,{})}),Object(p.jsx)(ge.a,{id:"outlined-email",error:se,value:oe.email||"",className:n.inputfull,onChange:function(e){!function(e){var t=lt.a.isEmail(e.target.value);ae(!t),le((function(){return Object(I.a)(Object(I.a)({},oe),{},{email:e.target.value})}))}(e)},label:"".concat(se?"Invalid Email":"Email"),variant:"outlined"}),Object(p.jsx)(ge.a,{id:"outlined-pass",className:n.inputfull,onChange:function(e){!function(e){le((function(t){return Object(I.a)(Object(I.a)({},t),{},{password:e.target.value})}))}(e)},label:"Enter Password",variant:"outlined"}),Object(p.jsx)("p",{children:X}),Object(p.jsxs)("div",{className:"w-full px-7  flex items-center justify-between",children:[Object(p.jsxs)(U.a,{variant:"contained",style:{backgroundColor:"#FF005C",color:"#ffff"},onClick:function(){!1===se?(T(!0),d.a.post("https://skyline.shuhaib.host/server/api/userSignin",oe,{headers:{"content-type":"application/json"}}).then((function(n){var s=m(n.data);localStorage.setItem("userChecking",s),t(n.data),T(!1),e.push("/")})).catch((function(e){var t,n;T(!1),console.log(e);var s=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.apiError;s&&$(s)}))):alert("Please Enter Valid Details")},endIcon:Object(p.jsx)(te.a,{}),children:[" ","Sign In"]}),Object(p.jsxs)("p",{className:"  ml-4",children:["Doesn't have an account?"," ",Object(p.jsx)(C.a,{onClick:function(){l(!i)},className:"inline ml-4 text-dark-gray hover:text-pink cursor-pointer",size:"1.6rem "})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)(dt.GoogleLogin,{clientId:"758095114048-3f9nic38mdvfolj12rmva0ce2g9hi15v.apps.googleusercontent.com",buttonText:"Sign Or Sign UP with Google",onSuccess:function(n){d.a.post("https://skyline.shuhaib.host/server/api/signin/with/google",n.profileObj).then((function(n){var s=m(n.data);localStorage.setItem("userChecking",s),t(n.data),e.push("/")}))},onFailure:function(e){},cookiePolicy:"single_host_origin"}),","]})]})}):Object(p.jsx)("div",{className:"relative flex justify-center",children:Object(p.jsxs)("div",{className:" flex items-center w-1/2   relative flex-col justify-center  space-y-5 h-screen p-6",children:[Object(p.jsxs)("h1",{className:"text-2xl",children:[" ","Sign up to"," ",Object(p.jsx)("span",{className:"text-pink capitalize font-bold",children:"skyline"})," "]}),Object(p.jsx)("div",{className:"w-1/2 rounded-full ".concat(L?"":"hidden"),children:Object(p.jsx)(ce.a,{})}),Object(p.jsxs)("div",{className:"space-x-4  ",children:[Object(p.jsx)(ge.a,{id:"outlined-username",name:"username",value:W.username,className:n.textColor,error:h,onChange:function(e){!function(e){var t=lt.a.isAlpha(e.target.value,"en-US",{ignore:" "});b(!t),q(e)}(e)},label:"".concat(h?"Invalid UserName":"Username"),variant:"outlined"}),Object(p.jsx)(ge.a,{id:"outlined-email",name:"email",value:W.email,className:n.textColor,error:E,onChange:function(e){!function(e){var t=lt.a.isEmail(e.target.value);F(!t),q(e)}(e)},label:"".concat(E?"Invalid Email":"Email"),variant:"outlined"})]}),Object(p.jsx)(ge.a,{id:"outlined-phone",name:"phone",value:W.phone,className:n.inputfull,error:A,onChange:function(e){!function(e){var t=lt.a.isNumeric(e.target.value),n=lt.a.isLength(e.target.value,{min:10,max:10});z(!t||!n),q(e)}(e)},label:"".concat(A?"Invalid Phone Number":"Phone Number"),variant:"outlined"}),Object(p.jsx)(ge.a,{id:"outlined-password",name:"password",value:W.password,className:n.inputfull,error:g,onChange:function(e){!function(e){var t=lt.a.isEmpty(e.target.value),n=lt.a.isLength(e.target.value,{min:4});v(!n||!1!==t),q(e)}(e)},label:"".concat(g?"Enter at least 4 characters":"password"),variant:"outlined"}),Object(p.jsx)(ge.a,{id:"outlined-cpass",name:"confirmPassword",value:W.confirmPassword,className:n.inputfull,error:N,onChange:function(e){!function(e){W.password===e.target.value?y(!1):y(!0),q(e)}(e)},label:"".concat(N?"Password didn't match":"Confrim Password"),variant:"outlined"}),Object(p.jsx)("div",{style:{width:"90%"},children:Object(p.jsx)(at,{locationDetails:V})}),Object(p.jsx)("p",{className:"text-red-400",children:K||""}),Object(p.jsxs)("div",{className:"w-full px-7  flex items-center justify-between",children:[Object(p.jsxs)(U.a,{variant:"contained",style:{color:"#ffff"},onClick:function(){Q(""),W.username?W.password?W.confirmPassword?0===W.preferredLocation.length?alert("please Select Perfered location"):h||g||N||A||E||!(W.preferredLocation.length>0)?alert("please Enter Details"):(T(!0),d.a.post("https://skyline.shuhaib.host/server/api/userSignup",W,{headers:{"content-type":"application/json"}}).then((function(n){console.log(n),T(!1);var s=m(n.data);localStorage.setItem("userChecking",s),t(n.data),e.push("/")})).catch((function(e){var t,n,s;T(!1),console.log("error found");var c=null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.error,a=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.apiError;c&&c.error.forEach((function(e){e.phone?z(!0):e.email&&F(!0)})),a?Q(a):console.log(e)}))):y(!0):v(!0):b(!0)},endIcon:Object(p.jsx)(te.a,{}),children:[" ","Sign Up"]}),Object(p.jsxs)("p",{className:"  ml-4",children:["Do you have already account?"," ",Object(p.jsx)(C.a,{onClick:function(){l(!i)},className:"inline ml-4 text-dark-gray hover:text-pink cursor-pointer",size:"1.6rem "})]})]})]})})})]})})},xt=function(){return(0,Object(s.useContext)(ut).setUserDataFromServer)(""),localStorage.removeItem("userChecking"),Object(p.jsx)(o.a,{to:"/signin"})},mt=n(210),ft=n.n(mt),pt=n(211),Ot=n.n(pt),gt=Object(z.a)("input")({display:"none"}),vt=function(e){var t,n=e.userPost,c=localStorage.getItem("userChecking"),a=f(c),i=Object(s.useState)(),o=Object(r.a)(i,2),l=o[0],u=o[1],j=Object(s.useState)(""),h=Object(r.a)(j,2),b=h[0],x=h[1],O=Object(s.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1],k=Object(s.useState)([]),N=Object(r.a)(k,2),y=N[0],C=N[1],S=Object(s.useState)([]),D=Object(r.a)(S,2),z=D[0],P=D[1],E=Object(s.useState)(!1),F=Object(r.a)(E,2),B=F[0],L=F[1];Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/info",{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var t=localStorage.getItem("userChecking"),n=f(t),s=Object(I.a)({},e.data.user),c=Object(I.a)({user:s},n),a=m(c);localStorage.setItem("userChecking",a);var r=e.data.user.photo||"";u(r)})).catch((function(e){console.log(e)}))}),[]);return Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var t,n,s=(null===(t=e.data.result[0])||void 0===t?void 0:t.followers)?e.data.result[0].followers:[],c=(null===(n=e.data.result[0])||void 0===n?void 0:n.following)?e.data.result[0].following:[];C(s),P(c)})).catch((function(e){console.log(e)}))}),[]),Object(p.jsxs)("div",{className:"shadow p-4 rounded-2xl relative ",children:[Object(p.jsx)(A.a,{}),Object(p.jsx)("div",{className:"h-48 overflow-hidden flex items-center rounded-2xl",children:Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:"",className:"w-full  ",alt:""})}),Object(p.jsxs)("div",{className:"rounded-2xl flex items-center  ",children:[Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png"},src:l,className:"w-36 h-36 rounded-full  -mt-20 ml-5",alt:""}),Object(p.jsxs)("div",{className:"p-3 flex justify-between w-full items-center ",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-xl text-pink font-bold",children:(null===(t=a.user)||void 0===t?void 0:t.username)||""}),Object(p.jsx)("p",{className:"w-26",children:"".concat(a.user.constructorPower?a.user.services.join(" "):"")})]}),v?Object(p.jsxs)(H.a,{variant:"outlined",children:[Object(p.jsx)(U.a,{onClick:function(){!function(){w(!1),L(!0);var e=new FormData;e.append("file",b),console.log(e),d.a.put("https://skyline.shuhaib.host/server/api/profile-pic/upload",e,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){Object(A.b)("Profile Picture Updated!"),L(!1);var t=Object(I.a)({},e.data.user),n=localStorage.getItem("userChecking"),s=f(n),c=Object(I.a)({user:t},s),a=m(c);localStorage.setItem("userChecking",a),u(e.data.user.photo)})).catch((function(e){Object(A.b)("try agin later!"),w(!1),L(!1),console.log(e)}))}()},children:Object(p.jsx)(T.a,{})}),Object(p.jsx)(U.a,{onClick:function(){!function(){var e=localStorage.getItem("userChecking"),t=f(e).user.photo;u(t),w(!1)}()},color:"error",children:Object(p.jsx)(R.a,{})})]}):Object(p.jsx)(U.a,{variant:"outlined",endIcon:Object(p.jsx)(ft.a,{}),children:"Edit Profile"})]})]}),Object(p.jsx)("div",{className:" inline absolute bg-white-100 rounded-full -mt-10 ml-3",children:Object(p.jsxs)("label",{htmlFor:"icon-button-file",children:[Object(p.jsx)(gt,{accept:"image/*",onChange:function(e){return function(e){var t=URL.createObjectURL(e.target.files[0]);x(e.target.files[0]),w(!0),u(t)}(e)},id:"icon-button-file",type:"file"}),Object(p.jsx)(_.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(p.jsx)(Ot.a,{})})]})}),Object(p.jsxs)("div",{className:"shadow bg-pink text-white flex text-center p-3 rounded-3xl mt-3 items-center justify-around",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Followers"}),Object(p.jsx)("p",{children:y.length})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Following"}),Object(p.jsx)("p",{children:z.length})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Posts"}),Object(p.jsx)("p",{children:n.length})]})]}),Object(p.jsx)("div",{className:"w-full mt-3 ".concat(!B&&"hidden"),children:Object(p.jsx)(ce.a,{})})]})},wt=function(e){var t=e.flex,n=(Object(s.useContext)(ut).userDataFromDatabase,localStorage.getItem("userChecking")),c=f(n),a=Object(s.useState)([]),i=Object(r.a)(a,2),o=i[0],l=i[1],u=Object(s.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(s.useState)(null),m=Object(r.a)(x,2),O=m[0],g=m[1],v=function(){g(null),b(!1)},w=function(e){d.a.delete("https://skyline.shuhaib.host/server/api/post/delete/".concat(e),{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(t){A.b.success("Post Successfully Deleted",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),l((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){console.log(e)}))};Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api//user/own/post",{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){l(e.data.posts)})).catch((function(e){console.log(e)}))}),[]);var k=function(e){g(e),b(!0)};return Object(p.jsxs)("div",{className:"".concat(t," min-h-withoutHeader w-full"),children:[Object(p.jsx)(A.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(p.jsxs)("div",{className:"p-6 ml-6 w-full ",children:[Object(p.jsx)("div",{className:"bg-re-400",children:Object(p.jsx)(vt,{userPost:o})}),o.map((function(e,t){return Object(p.jsx)(ye,{postData:e,deletePost:w,editPost:k},t)}))]}),O&&Object(p.jsx)(Se,{updatePost:function(e){d.a.put("https://skyline.shuhaib.host/server/api/post/edit/".concat(e.postId),e,{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(t){A.b.success("Post Successfully Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),l((function(){return o.map((function(t){return t._id==e.postId?Object(I.a)({title:e.title,content:e.content},t):t}))})),v()})).catch((function(e){console.log(e)}))},editMOdalOpen:h,editModalClose:v,modalData:O})]})},kt=n(59),Nt=n(465),yt=n(462),Ct=n(474),St=n(460),Dt=n(466),It={PaperProps:{style:{maxHeight:224,width:250}}},At=["Civil & Structural Concrete","Masonry and Plaster","Architectural and Finishing Works.","Pre Cast.","Pre Engineered Structures.","HVAC, Plumbing and Electrical.","Waterproofing and Insulation.","Human Resource Deployment & Management."];function zt(e,t,n){return{fontWeight:-1===t.indexOf(e)?n.typography.fontWeightRegular:n.typography.fontWeightMedium}}function _t(e){var t=e.services,n=e.setServices,s=e.setContractor,c=Object(kt.a)();return Object(p.jsx)("div",{className:" px-3 mt-4",children:Object(p.jsxs)(Ct.a,{sx:{m:1,width:"100%"},children:[Object(p.jsx)(yt.a,{id:"getServices",children:"Services"}),Object(p.jsx)(St.a,{labelId:"services",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"===typeof t?t.split(","):t),s((function(e){return Object(I.a)(Object(I.a)({},e),{},{services:t})}))},input:Object(p.jsx)(Nt.a,{id:"select-multiple-chip",label:"Services"}),renderValue:function(e){return Object(p.jsx)(V.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(p.jsx)(Dt.a,{label:e},e)}))})},MenuProps:It,children:At.map((function(e){return Object(p.jsx)(we.a,{value:e,style:zt(e,t,c),children:e},e)}))})]})})}var Pt=Object(Qe.a)({btn:{backgroundColor:"#FF005C",margin:"10px"}}),Et=function(e){var t=e.modalClose,n=Object(s.useContext)(ut),c=(n.userDataFromDatabase,n.setUserDataFromServer,localStorage.getItem("userChecking")),a=f(c),i=Pt(),o=Object(s.useState)([]),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(s.useState)(""),b=Object(r.a)(h,2),x=b[0],O=b[1],g=Object(s.useState)(!1),v=Object(r.a)(g,2),w=v[0],k=v[1],N=Object(s.useState)({constructorId:"",companyName:"",address:"",services:[]}),y=Object(r.a)(N,2),C=y[0],S=y[1],D=function(e){var t=e.target.name,n=e.target.value;S((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Ke.a)({},t,n))}))};return Object(p.jsxs)("div",{className:"",children:[w&&Object(p.jsx)(ce.a,{color:"primary"}),Object(p.jsx)("div",{className:"m-3",children:Object(p.jsx)(ge.a,{id:"standard-basic",name:"companyName",value:C.companyName,onChange:D,label:"Company Name ",fullWidth:!0,variant:"standard"})}),Object(p.jsx)("div",{className:"m-3",children:Object(p.jsx)(ge.a,{id:"standard-basic",name:"constructorId",value:C.constructorId,onChange:D,label:"Constructor Id ",fullWidth:!0,variant:"standard"})}),Object(p.jsx)("div",{className:"m-3",children:Object(p.jsx)(ge.a,{id:"standard-basic",name:"address",value:C.address,onChange:D,label:"Address ",fullWidth:!0,variant:"standard"})}),Object(p.jsx)("div",{className:" -ml-3",children:Object(p.jsx)(_t,{setServices:j,services:u,setContractor:S})}),Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"text-red-600 m-2",children:x})}),Object(p.jsx)(U.a,{variant:"contained",onClick:function(){C.constructorId.length<=4?O("Invalid Constructor Id"):C.companyName.length<=2?O("Invalid Company Name"):C.address.length<=4?O("Invalid Address"):0!=C.services.length?(O(""),k(!0),d.a.put("https://skyline.shuhaib.host/server/api/constructor/apply/",C,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){k(!1);var n=localStorage.getItem("userChecking"),s=f(n);console.log(s,"this is from local");var c=Object(I.a)(Object(I.a)({},s),{},{user:e.data.user}),a=m(c);localStorage.setItem("userChecking",a),t()})).catch((function(e){O(null===e||void 0===e?void 0:e.data.apiError),console.log(e)}))):O("Please Select Services")},className:i.btn,endIcon:Object(p.jsx)(te.a,{}),children:"Apply"})]})},Ft={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30%",bgcolor:"background.paper",boxShadow:24,p:4};function Bt(e){var t=e.open,n=e.handleClose;return Object(p.jsx)("div",{children:Object(p.jsx)(q.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:n,closeAfterTransition:!0,BackdropComponent:W.a,BackdropProps:{timeout:500},children:Object(p.jsx)(G.a,{in:t,children:Object(p.jsx)(V.a,{sx:Ft,className:"rounded-2xl",children:Object(p.jsx)(Et,{modalClose:n})})})})})}var Ut=function(e){var t=e.flex,n=Object(s.useContext)(_e),c=n.chatDetails,a=n.setChatting,o=localStorage.getItem("userChecking"),l=f(o),u=Object(s.useState)(!1),d=Object(r.a)(u,2),j=d[0],h=d[1],b=function(){return h(!0)};return Object(p.jsxs)("div",{className:"".concat(t," "),children:[Object(p.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(p.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(p.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(p.jsxs)("div",{className:"space-y-4 px-6 py-4",children:[Object(p.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(k.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "}),Object(p.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(p.jsx)(i.b,{to:"/",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(p.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(p.jsx)(i.b,{to:"/following",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]}),function(){var e,t,n;return!("yes"!==(null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.applied)||!(null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.constructorPower))||("pending"===(null===l||void 0===l||null===(n=l.user)||void 0===n?void 0:n.applied)?Object(p.jsx)("button",{disabled:!0,type:"button",className:"flex group bg-dark-gray h-16 duration-300 w-full justify-center space-x-4 items-center  p-3 rounded-2xl ",children:Object(p.jsx)("span",{className:"text-xl text-white ",children:"Applied "})}):Object(p.jsx)("button",{onClick:b,type:"button",className:"flex group hover:bg-dark-gray h-16 duration-300 w-full justify-center space-x-4 items-center bg-pink p-3 rounded-2xl ",children:Object(p.jsx)("span",{className:"text-xl text-white ",children:"Apply for contractor"})}))}(),l.user.rejected&&Object(p.jsx)("p",{className:"text-red-400 text-xl",children:"Application Rejected"})]}),Object(p.jsx)("div",{className:"px-4",children:c&&Object(p.jsx)(Le,{closeChatBox:a,chattingData:c})})]}),Object(p.jsx)(Bt,{open:j,handleOpen:b,handleClose:function(){return h(!1)}})]})},Ht=function(){var e=Object(o.g)(),t=localStorage.getItem("userChecking");return f(t)?Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Fe,{flex:"flex-1"}),Object(p.jsx)(wt,{flex:"flex-3"}),Object(p.jsx)(Ut,{flex:"flex-1"})]}):(e.push("/signin"),!0)},Lt=function(e){var t=e.data,n=e.postData,c=e.usersId,a=localStorage.getItem("userChecking"),i=f(a),o=Object(s.useState)([]),u=Object(r.a)(o,2),j=u[0],h=u[1],b=Object(s.useState)([]),x=Object(r.a)(b,2),m=x[0],O=x[1],g=Object(s.useState)(!1),v=Object(r.a)(g,2),w=v[0],k=v[1];Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/network/data/".concat(c),{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){h(e.data.result.followers),O(e.data.result.following)})).catch((function(e){console.log(e)}))}),[]);return Object(p.jsxs)("div",{className:"shadow p-4 rounded-2xl relative ",children:[Object(p.jsx)("div",{className:"h-48 overflow-hidden flex items-center rounded-2xl",children:Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:"",className:"w-full  ",alt:""})}),Object(p.jsxs)("div",{className:"rounded-2xl flex items-center  ",children:[Object(p.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png"},src:t.photo,className:"w-36 h-36 rounded-full  -mt-20 ml-5",alt:""}),Object(p.jsxs)("div",{className:"p-3 flex justify-between w-full items-center ",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{className:"text-xl text-pink font-bold",children:t.username}),Object(p.jsx)("p",{className:"w-26",children:t.services})]}),Object(p.jsx)("div",{children:function(){if(t._id!==i.user._id)return w?Object(p.jsx)(Y.a,{color:"success"}):j.some((function(e){return e==i.user._id}))?Object(p.jsx)(We.a,{color:"error",onClick:function(){return e=t._id,k(!0),void d.a.put("https://skyline.shuhaib.host/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){k(!1),h((function(e){return e.filter((function(e){return e!==i.user._id}))}))})).catch((function(e){}));var e}}):Object(p.jsxs)(_.a,{children:[" ",Object(p.jsx)(Me.a,{onClick:function(){return e=t._id,k(!0),void d.a.put("https://skyline.shuhaib.host/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){k(!1),h((function(e){return[].concat(Object(l.a)(e),[i.user._id])}))})).catch((function(e){k(!1),console.log(e)}));var e},className:!0})]})}()})]})]}),Object(p.jsxs)("div",{className:"shadow bg-pink text-white flex text-center p-3 rounded-3xl mt-3 items-center justify-around",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Followers"}),Object(p.jsx)("p",{children:j.length})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Following"}),Object(p.jsx)("p",{children:m.length})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{children:"Posts"}),Object(p.jsx)("p",{children:n.length})]})]})]})},Tt=function(e){var t=e.postData,n=localStorage.getItem("userChecking"),c=f(n),a=Object(s.useState)(t),o=Object(r.a)(a,2),u=o[0],j=o[1],h=t.comments||[],b=Object(s.useState)(h),x=Object(r.a)(b,2),m=x[0],O=x[1],g=Object(s.useState)(),v=Object(r.a)(g,2),w=v[0],k=v[1],N=Object(s.useState)(!1),y=Object(r.a)(N,2),C=y[0],S=y[1],D=function(){S(!0)},z=Object(s.useState)(null),_=Object(r.a)(z,2),P=_[0],E=(_[1],Boolean(P),Object(s.useState)(null)),F=Object(r.a)(E,2),B=F[0],U=F[1],H=Boolean(B),L=function(e){U(e.currentTarget)},T=function(e){U(null)},M=function(){d.a.put("https://skyline.shuhaib.host/server/api/post/dislike/".concat(u._id),{},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){j((function(e){var t=e.like.filter((function(e){return e!==c.user._id}));return Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},R=function(){d.a.put("https://skyline.shuhaib.host/server/api/post/like/".concat(u._id),{},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){j((function(e){var t=Object(l.a)(e.like);return t.push(c.user._id),Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},W=Object(s.useRef)(null);Object(s.useEffect)((function(){W&&W.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[m]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(A.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(p.jsxs)("div",{className:"shadow  rounded-2xl mb-10 p-4",children:[Object(p.jsx)("div",{className:"p-3 flex justify-between items-center ",children:Object(p.jsx)(i.b,{to:"/user/profile/".concat(t.user),children:Object(p.jsxs)("div",{className:" space-x-4 flex items-center",children:[Object(p.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-12 h-12  rounded-full",alt:""}),Object(p.jsxs)("div",{className:"text-sm text-dark-gray",children:[Object(p.jsx)("p",{children:"shuhaib"}),function(e){var t=(new Date).toDateString(),n=new Date(e).toDateString(),s=new Date(e).toLocaleTimeString();return t==n?Object(p.jsx)("p",{children:"Today ".concat(s)}):Object(p.jsx)("p",{children:n})}(u.date)]})]})})}),Object(p.jsxs)("div",{className:"p-4  mb-4",children:[Object(p.jsx)("h1",{className:"text-lg mb-2",children:u.title}),Object(p.jsx)("p",{className:"text-gray-700",children:u.content})]}),u.videoType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)(re.a,{controls:!0,width:"100%",url:u.mediaLink})}):u.imageType?Object(p.jsx)("div",{className:"flex justify-center",children:Object(p.jsx)("img",{src:u.mediaLink,alt:""})}):void 0,Object(p.jsxs)("div",{className:"flex justify-between  p-4",children:[Object(p.jsxs)("div",{className:"space-x-3 text-3xl ",children:[function(e){var t=e.length;return-1!==e.findIndex((function(e){return e==c.user._id}))?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(he.a,{className:"cursor-pointer ",color:"error",fontSize:"string",onClick:function(){return M()}}),Object(p.jsx)("span",{className:"text-sm",children:t})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(xe.a,{className:"cursor-pointer ",fontSize:"string",onClick:function(){return R()}}),Object(p.jsx)("span",{className:"text-sm",children:t})]})}(u.like),Object(p.jsx)(fe.a,{className:"cursor-pointer",fontSize:"string",onClick:function(){return D()}}),Object(p.jsx)("span",{className:"text-sm cursor-pointer",onClick:function(){return D()},children:"View All"})]}),Object(p.jsx)(Oe.a,{className:"cursor-pointer text-3xl",fontSize:"string"})]}),Object(p.jsx)("div",{className:" max-h-40 overflow-auto",ref:W,children:m.map((function(e){return Object(p.jsx)("div",{className:" p-2 ",children:Object(p.jsxs)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:[Object(p.jsxs)("div",{className:"flex space-x-2",children:[Object(p.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-8 h-8 rounded-full",alt:""}),Object(p.jsx)("p",{className:"text-sm  ",children:e.comment})]}),Object(p.jsx)(ve.a,{anchorEl:B,open:H,onClose:T,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(p.jsx)(we.a,{onClick:function(){var n;T(),n=e,d.a.put("https://skyline.shuhaib.host/server/api/delete/comment/".concat(t._id,"/").concat(n._id),{},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){A.b.success("Comment Deleted !",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),O((function(e){return e.filter((function(e){return e._id!==n._id}))}))}))},children:"Delete"})}),e.user==c.user._id&&Object(p.jsx)(de.a,{className:"cursor-pointer",onClick:L})]})})}))}),Object(p.jsxs)("div",{className:"w-full p-4 flex items-center",children:[Object(p.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Leave a comment",variant:"standard",value:w,onChange:function(e){return k(e.target.value)}}),Object(p.jsx)(te.a,{className:"cursor-pointer ",onClick:function(){return function(e){console.log(e),w.replaceAll(" ","").length>1&&d.a.put("https://skyline.shuhaib.host/server/api/post/add/comment/".concat(e._id),{comment:w},{headers:{Authorization:"Bearer ".concat(c.token)}}).then((function(e){var t=e.data.result;k(""),O((function(e){return[].concat(Object(l.a)(e),[t])}))})).catch((function(e){console.log(e)}))}(t)}})]})]}),Object(p.jsx)(Ne,{commentMOdalOpen:C,commentMOdalClose:function(){S(!1)},comments:m})]})},Mt=function(e){var t=e.flex,n=Object(o.h)().userId,c=localStorage.getItem("userChecking"),a=f(c),i=Object(s.useState)([]),l=Object(r.a)(i,2),u=l[0],j=l[1],h=Object(s.useState)(""),b=Object(r.a)(h,2),x=b[0],m=b[1];return Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/profile/".concat(n),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var t=e.data.result.posts,n=e.data.result.user;j(t),m(n)})).catch((function(e){console.log(e)}))}),[]),Object(p.jsx)("div",{className:"".concat(t," min-h-withoutHeader w-full"),children:Object(p.jsxs)("div",{className:"p-6 ml-6 w-full ",children:[Object(p.jsx)("div",{className:"bg-re-400",children:Object(p.jsx)(Lt,{data:x,usersId:n,postData:u})}),u.map((function(e){return Object(p.jsx)(Tt,{postData:e})}))]})})},Rt=function(e){var t=e.flex,n=Object(s.useContext)(_e),c=n.chatDetails,a=n.setChatting,r=localStorage.getItem("userChecking");f(r);return Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(p.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(p.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(p.jsx)("div",{className:"space-y-4 px-6 py-4",children:Object(p.jsxs)("div",{className:" px-6  ",children:[Object(p.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(k.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(p.jsx)(i.b,{to:"/",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(p.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(p.jsx)(i.b,{to:"/following",className:"m-2",children:Object(p.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(p.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(p.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]})})]}),Object(p.jsx)("div",{className:"px-4",children:c&&Object(p.jsx)(Le,{closeChatBox:a,chattingData:c})})]})})},Wt=function(){var e=Object(o.g)(),t=localStorage.getItem("userChecking");return f(t)?Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Fe,{flex:"flex-1"}),Object(p.jsx)(Mt,{flex:"flex-3"}),Object(p.jsx)(Rt,{flex:"flex-1"})]}):(e.push("/signin"),!0)},Vt=function(e){var t=e.userData,n=e.Following,c=Object(s.useState)(!1),a=Object(r.a)(c,2),o=a[0],l=a[1],u=localStorage.getItem("userChecking"),j=f(u),h=Object(s.useState)(null),b=Object(r.a)(h,2),x=b[0],m=b[1];Object(s.useEffect)((function(){n.some((function(e){return e._id===t._id}))&&m(!0)}),[]);return Object(p.jsx)("div",{className:"m-4",children:Object(p.jsxs)("div",{className:"w-52  shadow  h-60 p-4 flex flex-col items-center justify-center rounded-3xl ",children:[Object(p.jsx)(i.b,{to:"/user/profile/".concat(t._id),children:Object(p.jsx)("div",{className:"flex items-center justify-center",children:Object(p.jsx)("img",{src:t.photo||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQijG7DrhwuN3-8ccFfUJVOeHA3NojRTA9rECPbCX7wg-NY4KgnDbK_9vZO2c0ARCN3k8Q&usqp=CAU",alt:"",className:"h-24 w-24 rounded-full"})})}),Object(p.jsxs)("div",{className:"text-center mt-3",children:[Object(p.jsx)("h1",{children:t.username}),o?Object(p.jsx)(Y.a,{color:"success"}):Object(p.jsx)(_.a,{children:x?Object(p.jsx)(We.a,{color:"error",onClick:function(){return e=t._id,l(!0),void d.a.put("https://skyline.shuhaib.host/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(e){l(!1),m(!1)})).catch((function(e){l(!1)}));var e}}):Object(p.jsx)(Me.a,{onClick:function(){return e=t._id,l(!0),void d.a.put("https://skyline.shuhaib.host/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(e){l(!1),m(!0)})).catch((function(e){l(!1),console.log(e)}));var e},className:!0})})]})]})})},qt=function(e){var t=e.flex,n=e.followers,s=e.following,c=Object(p.jsx)("div",{className:"mt-24",children:Object(p.jsx)("h1",{className:"text-3xl",children:"No Followers"})});return Object(p.jsx)("div",{className:"".concat(t," min-h-withoutHeader  w-full"),children:Object(p.jsxs)("div",{className:"flex justify-evenly flex-wrap",children:[0==n.length&&c,n.map((function(e){return Object(p.jsx)(Vt,{userData:e,Following:s})}))]})})},Gt=function(){var e,t=Object(o.g)(),n=Object(s.useState)([]),c=Object(r.a)(n,2),a=c[0],i=c[1],l=Object(s.useState)([]),u=Object(r.a)(l,2),j=u[0],h=u[1],b=localStorage.getItem("userChecking");return b&&(e=f(b)),Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){var t=e.data.result[0],n=e.data.result[0];t=t?t.followersData:[],n=n?n.FollowingUsersData:[],h(t),i(n)}))}),[]),e?Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Fe,{flex:"flex-1"}),Object(p.jsx)(qt,{flex:"flex-3",followers:j,following:a,setFollowing:i}),Object(p.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},Jt=function(e){var t=e.i,n=e.setFollowing,c=Object(s.useState)(!1),a=Object(r.a)(c,2),o=a[0],l=a[1],u=localStorage.getItem("userChecking"),j=f(u);return Object(p.jsx)("div",{className:"m-4",children:Object(p.jsxs)("div",{className:"w-52  shadow  h-60 p-4 flex flex-col items-center justify-center rounded-3xl ",children:[Object(p.jsx)(i.b,{to:"/user/profile/".concat(t._id),children:Object(p.jsx)("div",{className:"flex items-center justify-center",children:Object(p.jsx)("img",{src:t.photo||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQijG7DrhwuN3-8ccFfUJVOeHA3NojRTA9rECPbCX7wg-NY4KgnDbK_9vZO2c0ARCN3k8Q&usqp=CAU",alt:"",className:"h-24 w-24 rounded-full"})})}),Object(p.jsxs)("div",{className:"text-center mt-3",children:[Object(p.jsx)("h1",{children:t.username}),o?Object(p.jsx)(Y.a,{}):Object(p.jsx)(_.a,{children:Object(p.jsx)(We.a,{onClick:function(){return e=t._id,l(!0),void d.a.put("https://skyline.shuhaib.host/server/api/unfollow/user/".concat(t._id),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(t){l(!1),n((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){l(!1)}));var e}})})]})]})})},Kt=function(e){var t=e.flex,n=e.following,s=e.setFollowing,c=Object(p.jsx)("div",{className:"mt-24",children:Object(p.jsx)("h1",{className:"text-3xl",children:"No Following"})});return Object(p.jsx)("div",{className:"".concat(t," min-h-withoutHeader  w-full"),children:Object(p.jsxs)("div",{className:"flex justify-evenly flex-wrap",children:[0==n.length&&c,n.map((function(e){return Object(p.jsx)(Jt,{i:e,setFollowing:s})}))]})})},Qt=function(){var e,t=Object(o.g)(),n=Object(s.useState)([]),c=Object(r.a)(n,2),a=c[0],i=c[1],l=localStorage.getItem("userChecking");return l&&(e=f(l)),Object(s.useEffect)((function(){d.a.get("https://skyline.shuhaib.host/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){var t=e.data.result[0]?e.data.result[0].FollowingUsersData:[];i(t)}))}),[]),e?Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Fe,{flex:"flex-1"}),Object(p.jsx)(Kt,{flex:"flex-3",following:a,setFollowing:i}),Object(p.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},Zt=function(e){var t=e.currentUser,n=e.conversation,c=e.getMessage,a=Object(s.useState)(null),i=Object(r.a)(a,2),o=i[0],l=i[1],u=t.user._id;return Object(s.useEffect)((function(){var e=n.members.find((function(e){return e!==u})),s=function(){var n=Object(ze.a)(Ae.a.mark((function n(){var s;return Ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.get("https://skyline.shuhaib.host/server/api/get/user/details/".concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}});case 2:s=n.sent,l(s.data.user);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();s()}),[]),Object(p.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",children:[Object(p.jsxs)("div",{className:"flex space-x-4 items-center",onClick:function(){return c(n._id,o)},children:[o&&Object(p.jsx)("img",{src:o.photo||"https://www.kindpng.com/picc/m/252-2524695_dummy-profile-image-jpg-hd-png-download.png",className:"h-8 w-8 rounded-full",alt:""}),o&&Object(p.jsx)("h1",{children:o.username})]}),o&&Object(p.jsx)(v.b,{color:"green"})]})},Yt=function(e){var t=e.flex,n=e.getMessage,c=e.conversation,a=e.setConversations,r=localStorage.getItem("userChecking"),i=f(r);return Object(s.useEffect)((function(){var e=function(){var e=Object(ze.a)(Ae.a.mark((function e(){var t;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("https://skyline.shuhaib.host/server/api/get/conversation",{headers:{Authorization:"Bearer ".concat(i.token)}});case 3:t=e.sent,a(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsx)("div",{className:"min-h-withoutHeader bg-white-100   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(p.jsx)("div",{className:" h-96 p-4 space-y-5",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(p.jsx)(Zt,{getMessage:n,conversation:e,currentUser:i},t)}))})})})},Xt=function(e){var t=e.messages,n=e.currentUser,c=e.setMessage,a=e.conversationId,i=e.currentFriend,o=e.socket,u=Object(s.useState)(""),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(s.useRef)(null);Object(s.useEffect)((function(){x&&x.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[t]);var m=function(){var e=Object(ze.a)(Ae.a.mark((function e(t){var s,r;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={conversationId:a,sender:n.user._id,text:h},e.prev=2,e.next=5,d.a.post("https://skyline.shuhaib.host/server/api/post/meesages",s,{headers:{Authorization:"Bearer ".concat(n.token)}});case 5:r=e.sent,o.current.emit("sendMessage",{senderId:n.user._id,reciverId:i._id,text:h}),c((function(e){return[].concat(Object(l.a)(e),[r.data])})),b(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:" min-h-chatHeight p-4 rounded-2xl bg-white-100",children:[Object(p.jsxs)("div",{className:"flex items-center space-x-3 ",children:[Object(p.jsx)("img",{src:i.photo||"https://www.kindpng.com/picc/m/252-2524695_dummy-profile-image-jpg-hd-png-download.png",className:"rounded-full w-14 h-14",alt:""}),Object(p.jsx)("h1",{children:i.username})]}),Object(p.jsx)("hr",{className:"mt-3"}),Object(p.jsx)("div",{className:"overflow-auto p-6   rounded",ref:x,style:{maxHeight:"600px",minHeight:"600px"},children:t.map((function(e,t){return Object(p.jsx)(Ue,{m:e,own:e.sender===n.user._id},t)}))}),Object(p.jsx)("div",{className:"  flex w-auto items-center mt-4 h-24 pb-4",children:Object(p.jsxs)("form",{onSubmit:m,className:"flex bg-white shadow  h-24 p-6 items-center w-full h-auto rounded-full",children:[Object(p.jsx)("input",{type:"text",value:h,onChange:function(e){return b(e.target.value)},className:"w-full h-10 outline-none ml-7 ",style:{background:"none"}}),Object(p.jsx)("button",{className:"p-3 p-x-6  text-white bg-pink rounded-full",children:"Send"})]})})]})})},$t=function(e){var t=e.flex,n=e.messages,s=e.openChat,c=e.currentUser,a=e.setMessage,r=e.conversationId,i=e.currentFriend,o=e.socket;return Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsx)("div",{className:"min-h-withoutHeader  p-6    max-h-48 w-1/2  fixed overflow-hidden ",children:s?Object(p.jsx)(Xt,{messages:n,socket:o,currentFriend:i,conversationId:r,currentUser:c,setMessage:a}):Object(p.jsx)("div",{className:" min-h-withoutHeader flex items-center text-center justify-center",children:Object(p.jsx)("h1",{className:"text-8xl text-gray-300 ",children:"Open A Message !"})})})})},en=function(e){var t=e.flex;e.onlineUsers,e.conversation,e.getAllMessages,e.currentUser;return Object(p.jsx)("div",{className:"".concat(t," "),children:Object(p.jsx)("div",{className:"min-h-withoutHeader bg-white-100  p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(p.jsx)("div",{className:" h-96 p-4"})})})},tn=function(){var e,t,n=Object(o.g)(),c=(Object(s.useContext)(_e).changeChattingDetails,Object(s.useState)([])),a=Object(r.a)(c,2),i=a[0],u=a[1],j=Object(s.useState)(null),h=Object(r.a)(j,2),b=h[0],x=h[1],m=Object(s.useState)(!1),O=Object(r.a)(m,2),g=O[0],v=O[1],w=Object(s.useState)(""),k=Object(r.a)(w,2),N=k[0],y=k[1],C=Object(s.useState)(null),S=Object(r.a)(C,2),D=S[0],I=S[1],A=Object(s.useState)([]),z=Object(r.a)(A,2),_=z[0],P=z[1],E=Object(s.useState)([]),F=Object(r.a)(E,2),B=F[0],U=F[1],H=Object(s.useRef)(),L=localStorage.getItem("userChecking");if(L&&(t=f(L)),Object(s.useEffect)((function(){H.current=Object(He.a)("wss://skyline.shuhaib.host/websocket",{transports:["websocket"],rejectUnauthorized:!1}),H.current.on("getMessage",(function(e){x({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(s.useEffect)((function(){b&&D._id==b.sender&&u((function(e){return[].concat(Object(l.a)(e),[b])}))}),[b]),Object(s.useEffect)((function(){H.current.emit("addUser",t.user._id),H.current.on("getUser",(function(e){P(e)}))}),[]),Object(s.useEffect)((function(){return function(){H.current.emit("disconnet",t.user._id)}}),[]),!t)return n.push("/signin"),!0;var T=function(e,n){d.a.get("https://skyline.shuhaib.host/server/api/get/meesages/".concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){I(n),y(e),v(!0),u(t.data.result||[])})).catch((function(e){console.log(e)}))};return Object(p.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(p.jsx)(Yt,{getMessage:T,conversation:B,setConversations:U,flex:"flex-1"}),Object(p.jsx)($t,{messages:i,socket:H,openChat:g,currentFriend:D,currentUser:t,conversationId:N,setMessage:u,flex:"flex-3"}),Object(p.jsx)(en,(e={onlineUsers:_,getMessage:T,conversation:B},Object(Ke.a)(e,"conversation",B),Object(Ke.a)(e,"currentUser",t),Object(Ke.a)(e,"flex","flex-1"),e))]})},nn=function(){var e,t=Object(s.useState)(null),n=Object(r.a)(t,2),c=n[0],a=n[1],l=Object(s.useState)(null),u=Object(r.a)(l,2),d=u[0],j=u[1],h=localStorage.getItem("userChecking");h&&(e=f(h));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(ut.Provider,{value:{userDataFromDatabase:d,setUserDataFromServer:j},children:Object(p.jsxs)(_e.Provider,{value:{chatDetails:c,changeChattingDetails:a},children:[e||d?Object(p.jsx)(D,{}):void 0,Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/",exact:!0,component:Je}),Object(p.jsx)(o.b,{path:"/signin",exact:!0,component:bt}),Object(p.jsx)(o.b,{path:"/profile/",component:Ht}),Object(p.jsx)(o.b,{path:"/logout",component:xt}),Object(p.jsx)(o.b,{path:"/user/profile/:userId",component:Wt}),Object(p.jsx)(o.b,{path:"/followers",component:Gt}),Object(p.jsx)(o.b,{path:"/following",component:Qt}),Object(p.jsx)(o.b,{path:"/message",component:tn})]})]})})})})};a.a.render(Object(p.jsx)(nn,{}),document.getElementById("root"))}},[[382,14,15]]]);
//# sourceMappingURL=main.96cb2f00.chunk.js.map