(this["webpackJsonpuser-frontend-app"]=this["webpackJsonpuser-frontend-app"]||[]).push([[0],{239:function(e,t,c){},259:function(e,t){},382:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c(57),s=c.n(a),r=(c(239),c(5)),i=c(17),o=c(26),l=c(20),u=c(12),d=c.n(u),j=c(110),h=c(140),b=c.n(h),x="0242ac120003",m=function(e){return b.a.AES.encrypt(JSON.stringify(e),x).toString()},p=function(e){var t=b.a.AES.decrypt(e,x);try{return JSON.parse(t.toString(b.a.enc.Utf8))}catch(c){return null}},f=c(1),O=function(e){var t=e.flex,c=localStorage.getItem("userChecking"),a=p(c),s=Object(n.useState)([]),o=Object(r.a)(s,2),u=o[0],h=o[1],b=Object(n.useState)(!1),x=Object(r.a)(b,2),m=x[0],O=x[1];return Object(f.jsxs)("div",{className:"".concat(t,"  "),children:[Object(f.jsxs)("div",{className:"flex   h-16  rounded-2xl px-3  w-full justify-around items-center",children:[Object(f.jsx)("h1",{className:"mr-2 font-main text-pink text-4xl font-bold cursor-pointer",children:"skyline"}),Object(f.jsxs)("div",{className:" flex items-center rounded-full bg-white-100 px-4",children:[Object(f.jsx)(j.b,{size:"1.5rem",className:"text-dark-gray"}),Object(f.jsx)("input",{onChange:function(e){return function(e){var t=e.target.value;if(0===t.replaceAll(" ","").length)return O(!1),void h((function(){return[]}));d.a.get("/api/search/result?key=".concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var t=e.data.result;0==t.length?(O(!1),h((function(){return[]}))):(O(!0),h((function(){return Object(l.a)(t)})))}))}(e)},className:" px-4 py-2 text-pink bg-transparent focus:outline-none",placeholder:"search post, company..",type:"text"})]})]}),Object(f.jsx)("div",{className:"bg-pink   absolute  rounded-2xl p-4    w-1/4 ".concat(m?"":"hidden"),children:null===u||void 0===u?void 0:u.map((function(e){return Object(f.jsx)(i.b,{to:"/user/profile/".concat(e._id),children:Object(f.jsxs)("div",{className:"flex items-center cursor-pointer rounded-full bg-white-100 p-2 m-2 space-x-3",children:[Object(f.jsx)("img",{src:e.photo,className:"w-8 h-8 rounded-full",alt:""}),Object(f.jsx)("h1",{children:e.username})]})})}))})]})},g=c(195),v=c(36),w=c(70),N=c(53),k=function(e){var t,c,a=e.flex,s=Object(n.useState)(!1),o=Object(r.a)(s,2),l=o[0],u=o[1],d=localStorage.getItem("userChecking"),j=p(d);return Object(f.jsx)("div",{className:"".concat(a,"   items-center rounded-full    w-full "),children:Object(f.jsxs)("div",{className:"flex rounded-2xl h-16   bg-dark-white  ml-4 shadow-md justify-around items-center w-full",children:[Object(f.jsxs)("div",{className:"".concat(l?"hidden":"flex"," duration-300  items-center justify-center space-x-4"),children:[Object(f.jsx)("img",{src:(null===(t=j.user)||void 0===t?void 0:t.photo)||"https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png",className:"rounded-full h-8 w-8",alt:""}),Object(f.jsx)("h3",{children:(null===(c=j.user)||void 0===c?void 0:c.username)||""})]}),Object(f.jsx)("div",{className:"".concat(l?"hidden":""," bg-white hover:bg-pink hover:text-white duration-200 p-2 cursor-pointer rounded-full text-pink"),onClick:function(){return u(!l)},children:Object(f.jsx)(g.a,{size:"1.5rem"})}),Object(f.jsxs)("div",{className:"".concat(l?"flex":"hidden"," duration-300 items-center justify-around px-4  w-full space-x-4"),children:[Object(f.jsxs)(i.b,{to:"profile",onClick:function(){return u(!l)},className:"flex items-center jusitfy-between ",children:[Object(f.jsx)(w.b,{size:"1.4rem",className:"mr-3 text-pink hover:text-dark-gray"}),"Profile"]}),Object(f.jsxs)(i.b,{className:"flex items-center jusitfy-between ",onClick:function(){return u(!l)},children:[Object(f.jsx)(w.c,{size:"1.4rem",className:"mr-3 text-pink  hover:text-dark-gray"}),"Settings"]}),Object(f.jsxs)(i.b,{to:"/logout",className:"flex items-center jusitfy-between  ",onClick:function(){return u(!l)},children:[Object(f.jsx)(v.e,{size:"1.4rem",className:"mr-3 text-pink  hover:text-dark-gray"}),"Logout"]}),Object(f.jsx)("div",{className:" bg-white hover:bg-pink hover:text-white duration-200 p-2 cursor-pointer rounded-full text-pink",onClick:function(){return u(!l)},children:Object(f.jsx)(N.a,{size:"1.5rem"})})]})]})})},y=c(196),C=c(73),S=function(e){var t=e.flex;return Object(f.jsx)("div",{className:"".concat(t," items-center  w-full shadow-md rounded-full"),children:Object(f.jsxs)("div",{className:"flex rounded-2xl h-16  text-dark-gray bg-dark-white  justify-around items-center w-full",children:[Object(f.jsx)(i.b,{to:"/",children:Object(f.jsx)("div",{className:"hover:bg-pink duration-300  ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:Object(f.jsx)(v.a,{size:"2rem"})})}),Object(f.jsx)(i.b,{to:"/following",children:Object(f.jsx)("div",{className:"hover:bg-pink duration-300  ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:Object(f.jsx)(y.a,{size:"2rem"})})}),Object(f.jsx)(i.b,{to:"/message",children:Object(f.jsxs)("div",{className:"group hover:bg-pink duration-300 relative ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:[Object(f.jsx)("span",{className:"p-0.5 absolute group-hover:bg-dark-gray duration-300  text-sm h-6 w-6 text-center text-white -top-1 -right-1 rounded-full bg-pink",children:"3"}),Object(f.jsx)(C.b,{size:"2rem"})]})}),Object(f.jsxs)("div",{className:"group hover:bg-pink duration-300 relative ease-linear bg-white cursor-pointer hover:text-white p-2 rounded-2xl     ",children:[Object(f.jsx)("span",{className:"group-hover:bg-dark-gray p-0.5 duration-300  absolute text-sm h-6 w-6 text-center text-white -top-1 -right-1 rounded-full bg-pink",children:"3"}),Object(f.jsx)(N.b,{size:"2rem"})]})]})})},z=function(){return Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full z-40 items-center justify-between p-6 fixed top-0",children:[Object(f.jsx)(O,{flex:"flex-1"}),Object(f.jsx)(S,{flex:"flex-3"}),Object(f.jsx)(k,{flex:"flex-1"})]})},I=c(18),_=c(25),D=(c(103),c(8)),E=c(469),P=c(198),B=c.n(P),A=c(199),F=c.n(A),T=c(467),L=c(470),U=c(129),M=c.n(U),H=c(130),R=c.n(H),W=c(463),V=c(464),J=c(457),q=c(445),Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,p:4};function Y(e){var t=e.open,c=e.setOpen,n=e.data;return Object(f.jsx)("div",{children:Object(f.jsx)(J.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:function(){return c(!1)},closeAfterTransition:!0,BackdropComponent:W.a,BackdropProps:{timeout:500},children:Object(f.jsx)(q.a,{in:t,children:Object(f.jsx)(V.a,{sx:Z,children:Object(f.jsx)("img",{src:n.imageLink,alt:""})})})})})}var G=Object(D.a)("input")({display:"none"}),K=function(e){var t=e.existStory,c=e.setUserStory,a=localStorage.getItem("userChecking"),s=p(a),i=Object(n.useRef)(null),o=Object(n.useState)(""),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(n.useState)(""),b=Object(r.a)(h,2),x=b[0],m=b[1],O=Object(f.jsx)(E.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(f.jsx)(B.a,{onClick:function(){i.current.click()}})}),g=Object(f.jsxs)(L.a,{variant:"outlined",children:[Object(f.jsx)(T.a,{onClick:function(){return function(){var e=new FormData;e.append("file",u),d.a.post("http://54.205.19.94/server/api/user/story/update",e,{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){c(e.data.story)})).catch((function(e){console.log(e)}))}()},children:Object(f.jsx)(M.a,{})}),Object(f.jsx)(T.a,{onClick:function(){j(null),m(null)},color:"error",children:Object(f.jsx)(R.a,{})})]}),v=Object(n.useState)(!1),w=Object(r.a)(v,2),N=w[0],k=w[1],y=function(){return k(!0)};return t?Object(f.jsxs)("div",{className:"",children:[Object(f.jsxs)("div",{onClick:function(){y()},children:[Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:t.imageLink,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""}),Object(f.jsx)(E.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(f.jsx)(F.a,{onClick:function(){return console.log("this is deleter funtion"),void d.a.delete("http://54.205.19.94/server/api/user/delete/story",{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){c(null),j(null),m(null)})).catch((function(e){console.log(e.data)}))}})})]}),t&&Object(f.jsx)(Y,{data:t,open:N,setOpen:k,handleOpen:y})]}):Object(f.jsx)("div",{className:"",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:x,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""}),Object(f.jsx)(G,{accept:"image/*",ref:i,onChange:function(e){var t=e.target.files[0];j(t);var c=URL.createObjectURL(t);m(c)},id:"icon-button-file",type:"file"}),x?g:O]})})},Q=c(471),X=function(e){var t=e.data,c=Object(n.useState)(!1),a=Object(r.a)(c,2),s=a[0],i=a[1],o=function(){return i(!0)};return Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("div",{onClick:function(){o()},children:Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://launchfulfillment.com/wp-content/uploads/2016/04/dummy-post-horisontal.jpg"},src:t.imageLink,className:" border-white-100 border-4 h-24 w-24  cursor-pointer rounded-full",alt:""})}),t&&Object(f.jsx)(Y,{data:t,open:s,setOpen:i,handleOpen:o})]})},$=function(){var e=localStorage.getItem("userChecking"),t=p(e),c=Object(n.useState)(null),a=Object(r.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)([]),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(n.useState)(!0),b=Object(r.a)(h,2),x=b[0],m=b[1];Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/get/all/stories",{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){var t=e.data.userStory,c=e.data.userFollowingStory;i(t),j(c),m(!1)})).catch((function(e){console.log(e)}))}),[]);var O=Object(n.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1];return Object(f.jsx)("div",{className:"flex relative duration-400 ".concat(v?"overflow-x-auto":"overflow-x-hidden"," scroll-touch flex-row items-center justify-start space-x-4 cursor-pointer"),onMouseEnter:function(){w(!v)},onMouseLeave:function(){w(!v)},children:Object(f.jsx)("div",{className:"w-20 p-5",children:Object(f.jsx)("div",{className:"flex space-x-3   w-max ",children:x?Object(f.jsx)(Q.a,{}):Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsx)(K,{existStory:s,setUserStory:i})," ",null===u||void 0===u?void 0:u.map((function(e){return Object(f.jsx)(X,{data:e},e._id)}))]})})})})},ee=c(61),te=c.n(ee),ce=c(458),ne=c(454),ae=c(468),se=c(76),re=c.n(se),ie=c(131),oe=c.n(ie),le=function(e){var t=e.setPosts,c=localStorage.getItem("userChecking"),a=p(c),s=Object(n.useState)(!1),i=Object(r.a)(s,2),o=i[0],u=i[1],h=Object(n.useRef)(null),b=Object(n.useRef)(null),x=Object(n.useRef)(null),m=Object(n.useRef)(null),O=Object(n.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1],N=Object(n.useState)(),k=Object(r.a)(N,2),y=k[0],S=k[1],z=Object(n.useState)(!1),I=Object(r.a)(z,2),D=I[0],E=I[1],P=Object(n.useState)(!1),B=Object(r.a)(P,2),A=B[0],F=B[1],L=Object(n.useState)(!1),U=Object(r.a)(L,2),M=U[0],H=U[1],R=Object(n.useRef)(null),W=Object(n.useState)(""),V=Object(r.a)(W,2),J=V[0],q=V[1],Z=Object(n.useState)("public"),Y=Object(r.a)(Z,2),G=Y[0],K=Y[1];return Object(f.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mt-6 mb-5",children:[Object(f.jsx)(_.a,{}),Object(f.jsxs)("div",{className:"p-6",children:[Object(f.jsxs)("div",{className:"flex space-x-3 items-center",children:[Object(f.jsx)("img",{src:a.user.photo,className:"h-9 w-9 rounded-full",alt:""}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:a.user.username}),Object(f.jsxs)("select",{value:G,title:"asa",onChange:function(e){K(e.target.value)},children:[Object(f.jsx)("option",{value:"public",selected:!0,children:"Public"}),Object(f.jsx)("option",{value:"onlyme",children:"Only me"})]})]})]}),Object(f.jsxs)("div",{className:"mt-3",children:[Object(f.jsxs)("div",{className:"flex flex-col",children:[Object(f.jsx)("input",{type:"text",placeholder:"title",className:"h-4 p-4 m-2 outline-none",ref:x}),Object(f.jsx)("textarea",{type:"text",placeholder:"Content",className:" p-4 m-2 outline-none resize-none",rows:"",ref:m}),Object(f.jsx)("hr",{})]}),Object(f.jsxs)("div",{className:"flex items-center justify-center p-2  ",children:[A&&Object(f.jsx)("img",{className:"h-96 w-atuo",src:y,alt:"postImages"}),D&&Object(f.jsx)(re.a,{url:y,controls:!0})]}),Object(f.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:"flex space-x-4 text-xl mt-3 capitalize",children:[Object(f.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){h.current.click()},children:[Object(f.jsx)(j.a,{style:{color:"#FF005C"},size:"1.7rem"}),Object(f.jsx)("p",{children:"photos"}),Object(f.jsx)("input",{type:"file",ref:h,onChange:function(e){!function(e){if(e.target.files[0]){E(!1),F(!0),w(!0);var t=e.target.files[0],c=URL.createObjectURL(t);S(c)}}(e)},accept:"image/*",hidden:!0})]}),Object(f.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){b.current.click()},children:[Object(f.jsx)(j.c,{style:{color:"#4CAF50"},size:"1.7rem"}),Object(f.jsx)("p",{children:"Video "}),Object(f.jsx)("input",{type:"file",hidden:!0,ref:b,onChange:function(e){!function(e){if(e.target.files[0]){E(!0),F(!1),w(!0);var t=e.target.files[0],c=URL.createObjectURL(t);S(c)}}(e)},accept:"video/*"})]}),Object(f.jsxs)("div",{className:"cursor-pointer flex space-x-3",onClick:function(){H(!M)},children:[Object(f.jsx)(C.c,{style:{color:"#FF005C"},size:"1.7rem"}),Object(f.jsx)("p",{children:"Tag "})]})]})}),Object(f.jsxs)("div",{className:"space-x-4 ".concat(o&&"hidden"),children:[v&&Object(f.jsx)(T.a,{variant:"contained",color:"secondary",onClick:function(){w(!1),E(!1),F(!1),S("")},endIcon:Object(f.jsx)(oe.a,{}),children:"Cancel"}),Object(f.jsx)(T.a,{variant:"contained",style:{backgroundColor:"#FF005C"},onClick:function(){!function(){var e,c=x.current.value,n=m.current.value,s=J,r=c.replace(" ",""),i=n.replace(" ","");if(0==r||0==i)return alert("please Enter some data"),!0;A?e=h.current.files[0]:D&&(e=b.current.files[0]),u(!0);var o=new FormData;o.append("title",c),o.append("content",n),o.append("tags",s),o.append("privacy",G),o.append("media",e),d.a.post(" http://54.205.19.94/server/api/post/uploading",o,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){"public"==G&&t((function(t){var c=[e.data.post].concat(Object(l.a)(t));return console.log(c),c})),Object(_.b)("Post Succesfully updated !"),x.current.value="",m.current.value="",w(!1),E(!1),F(!1),S(""),u(!1)})).catch((function(e){Object(_.b)("Try Again Later !"),x.current.value="",m.current.value="",w(!1),E(!1),F(!1),S(""),u(!1),console.log(e)}))}()},endIcon:Object(f.jsx)(te.a,{}),children:"Send"})]})]})]}),Object(f.jsx)("div",{className:"mt-5 px-5 ".concat(o?"":"hidden"),children:Object(f.jsx)(ae.a,{color:"success"})})]}),Object(f.jsx)(ce.a.Root,{show:M,as:n.Fragment,children:Object(f.jsx)(ne.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:R,onClose:H,children:Object(f.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(f.jsx)(ce.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(f.jsx)(ne.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(f.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(f.jsx)(ce.a.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(f.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(f.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(f.jsx)("div",{className:"sm:flex sm:items-start",children:Object(f.jsxs)("div",{className:"mt-3 text-center sm:mt-0  w-full sm:ml-4 sm:text-left",children:[Object(f.jsx)(ne.a.Title,{as:"h3",className:"text-lg leading-6  font-medium text-gray-900",children:"Add Your Tags with comma"}),Object(f.jsx)("div",{className:"mt-2 ",children:Object(f.jsx)("input",{value:J,onChange:function(e){var t=e.target.value;q(t)},type:"text",placeholder:"add your text with comma",className:"outline-none w-full "})})]})})}),Object(f.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Object(f.jsx)("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){H(!1)},children:"Add"}),Object(f.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){q(""),H(!1)},ref:R,children:"Cancel"})]})]})})]})})})]})},ue=c(114),de=c.n(ue),je=c(133),he=c.n(je),be=c(134),xe=c.n(be),me=c(135),pe=c.n(me),fe=c(136),Oe=c.n(fe),ge=c(461),ve=c(213),we=c(459),Ne={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxHeight:700,overflow:"auto",bgcolor:"background.paper",boxShadow:24,p:4};function ke(e){var t=e.commentMOdalOpen,c=e.commentMOdalClose,n=e.comments;return Object(f.jsx)("div",{children:Object(f.jsx)(J.a,{open:t,onClose:function(){c()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(f.jsx)(V.a,{sx:Ne,children:n.map((function(e){return Object(f.jsx)("div",{className:" p-2 ",children:Object(f.jsx)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:Object(f.jsxs)("div",{className:"flex space-x-2",children:[Object(f.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-8 h-8 rounded-full",alt:""}),Object(f.jsx)("p",{className:"text-sm  ",children:e.comment})]})})})}))})})})}var ye=function(e){var t,c,a=e.postData,s=e.deletePost,o=e.editPost,u=Object(n.useState)(a),j=Object(r.a)(u,2),h=j[0],b=j[1],x=localStorage.getItem("userChecking"),m=p(x),O=a.comments||[],g=Object(n.useState)(O),v=Object(r.a)(g,2),w=v[0],N=v[1],k=Object(n.useState)(),y=Object(r.a)(k,2),C=y[0],S=y[1],z=Object(n.useState)(!1),D=Object(r.a)(z,2),E=D[0],P=D[1],B=function(){P(!0)},A=Object(n.useState)(null),F=Object(r.a)(A,2),T=F[0],L=F[1],U=Boolean(T),M=Object(n.useState)(null),H=Object(r.a)(M,2),R=H[0],W=H[1],V=Boolean(R),J=function(e){W(e.currentTarget)},q=function(e){W(null)},Z=function(){L(null)},Y=function(){d.a.put("http://54.205.19.94/server/api/post/dislike/".concat(h._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){b((function(e){var t=e.like.filter((function(e){return e!==m.user._id}));return Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},G=function(){d.a.put("http://54.205.19.94/server/api/post/like/".concat(h._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){b((function(e){var t=Object(l.a)(e.like);return t.push(m.user._id),Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},K=Object(n.useRef)(null);Object(n.useEffect)((function(){K&&K.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[w]);var Q;return Object(f.jsxs)("div",{children:[Object(f.jsx)(_.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(f.jsxs)("div",{className:"shadow  rounded-2xl mb-10 p-4",children:[Object(f.jsxs)("div",{className:"p-3 flex justify-between items-center ",children:[Object(f.jsx)(i.b,{to:"/user/profile/".concat(a.user),children:Object(f.jsxs)("div",{className:" space-x-4 flex items-center",children:[Object(f.jsx)("img",{src:(null===(t=a.userDetails)||void 0===t?void 0:t.photo)||"http://www.londondentalsmiles.co.uk/wp-content/uploads/2017/06/person-dummy.jpg",className:"w-12 h-12  rounded-full",alt:""}),Object(f.jsxs)("div",{className:"text-sm text-dark-gray",children:[Object(f.jsx)("p",{children:null===a||void 0===a||null===(c=a.userDetails)||void 0===c?void 0:c.username}),function(e){var t=(new Date).toDateString(),c=new Date(e).toDateString(),n=new Date(e).toLocaleTimeString();return t==c?Object(f.jsx)("p",{children:"Today ".concat(n)}):Object(f.jsx)("p",{children:c})}(h.date)]})]})}),Object(f.jsx)(de.a,{onClick:function(e){L(e.currentTarget)},"ria-haspopup":"true","aria-expanded":U?"true":void 0,className:"cursor-pointer"}),Object(f.jsx)(ve.a,{anchorEl:T,open:U,onClose:Z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:(Q=h,Q.user==m.user._id?[Object(f.jsx)(we.a,{onClick:function(){Z(),s(Q._id)},children:"Delete"}),Object(f.jsx)(we.a,{onClick:function(){Z(),o(Q)},children:"Edit"})]:Object(f.jsx)(we.a,{onClick:Z,children:"Report"}))})]}),Object(f.jsxs)("div",{className:"p-4  mb-4",children:[Object(f.jsx)("h1",{className:"text-lg mb-2",children:h.title}),Object(f.jsx)("p",{className:"text-gray-700",children:h.content})]}),h.videoType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)(re.a,{controls:!0,width:"100%",url:h.mediaLink})}):h.imageType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)("img",{src:h.mediaLink,alt:""})}):void 0,Object(f.jsxs)("div",{className:"flex justify-between  p-4",children:[Object(f.jsxs)("div",{className:"space-x-3 text-3xl ",children:[function(e){var t=e.length;return-1!==e.findIndex((function(e){return e==m.user._id}))?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(he.a,{className:"cursor-pointer ",color:"error",fontSize:"string",onClick:function(){return Y()}}),Object(f.jsx)("span",{className:"text-sm",children:t})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(xe.a,{className:"cursor-pointer ",fontSize:"string",onClick:function(){return G()}}),Object(f.jsx)("span",{className:"text-sm",children:t})]})}(h.like),Object(f.jsx)(pe.a,{className:"cursor-pointer",fontSize:"string",onClick:function(){return B()}}),Object(f.jsx)("span",{className:"text-sm cursor-pointer",onClick:function(){return B()},children:"View All"})]}),Object(f.jsx)(Oe.a,{className:"cursor-pointer text-3xl",fontSize:"string"})]}),Object(f.jsx)("div",{className:" max-h-40 overflow-auto",ref:K,children:w.map((function(e,t){return Object(f.jsx)("div",{className:" p-2 ",children:Object(f.jsxs)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:[Object(f.jsxs)("div",{className:"flex space-x-2",children:[Object(f.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-8 h-8 rounded-full",alt:""}),Object(f.jsx)("p",{className:"text-sm  ",children:e.comment})]}),Object(f.jsx)(ve.a,{anchorEl:R,open:V,onClose:q,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(f.jsx)(we.a,{onClick:function(){q(),function(e){d.a.put("http://54.205.19.94/server/api/delete/comment/".concat(a._id,"/").concat(e._id),{},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(t){_.b.success("Comment Deleted !",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),N((function(t){return t.filter((function(t){return t._id!==e._id}))}))}))}(e)},children:"Delete"})}),e.user==m.user._id&&Object(f.jsx)(de.a,{className:"cursor-pointer",onClick:J})]})},t)}))}),Object(f.jsxs)("div",{className:"w-full p-4 flex items-center",children:[Object(f.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Leave a comment",variant:"standard",value:C,onChange:function(e){return S(e.target.value)}}),Object(f.jsx)(te.a,{className:"cursor-pointer ",onClick:function(){return function(e){console.log(e),C.replaceAll(" ","").length>1&&d.a.put("http://54.205.19.94/server/api/post/add/comment/".concat(e._id),{comment:C},{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(e){var t=e.data.result;S(""),N((function(e){return[].concat(Object(l.a)(e),[t])}))})).catch((function(e){console.log(e)}))}(a)}})]})]}),Object(f.jsx)(ke,{commentMOdalOpen:E,commentMOdalClose:function(){P(!1)},comments:w})]})},Ce={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",boxShadow:24,p:4};function Se(e){var t=e.editMOdalOpen,c=e.editModalClose,a=e.modalData,s=e.updatePost,i=Object(n.useState)(a.title),o=Object(r.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(a.content),j=Object(r.a)(d,2),h=j[0],b=j[1];return Object(f.jsx)("div",{children:Object(f.jsx)(J.a,{open:t,onClose:function(){c()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(f.jsx)(V.a,{sx:Ce,children:Object(f.jsxs)("div",{className:"space-y-3",children:[Object(f.jsxs)("div",{className:"space-y-3 w-full",children:[Object(f.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Title",value:l,onChange:function(e){return u(e.target.value)},variant:"standard"}),Object(f.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Description",value:h,onChange:function(e){return b(e.target.value)},variant:"standard"})]}),Object(f.jsx)("div",{children:function(){if(a)return a.videoType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)(re.a,{controls:!0,width:"100%",url:a.mediaLink})}):a.imageType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)("img",{src:a.mediaLink,alt:""})}):void 0}()}),Object(f.jsxs)("div",{className:"flex justify-end  space-x-4 p-4",children:[Object(f.jsx)("button",{className:"px-5 py-2 bg-red-600 text-white rounded-full hover:bg-white-100 hover:text-dark-gray  transition duration-400 ",onClick:function(){return c()},children:" Cancel"}),Object(f.jsx)("button",{className:"px-5 py-2 bg-dark-gray text-white  hover:bg-dark hover:text-white transition duration-300 rounded-full ",onClick:function(){s({title:l,content:h,postId:a._id})},children:"  update"})]})]})})})})}var ze=function(e){var t,c=e.flex,a=localStorage.getItem("userChecking"),s=p(a),i=Object(n.useState)([]),o=Object(r.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(!1),h=Object(r.a)(j,2),b=h[0],x=h[1],m=Object(n.useState)(null),O=Object(r.a)(m,2),g=O[0],v=O[1],w=function(){v(null),x(!1)};Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/logged/get/all/post",{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){u(e.data.data)})).catch((function(e){console.log(e.data)}))}),[]);var N=function(e){d.a.delete("http://54.205.19.94/server/api/post/delete/".concat(e),{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(t){_.b.success("Post Successfully Deleted",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0});var c=l.filter((function(t){return t._id!==e}));console.log("deleted and balanced ",c),u(c)})).catch((function(e){console.log(e)}))},k=function(e){v(e),x(!0)};return Object(f.jsxs)("div",{className:"".concat(c," min-h-withoutHeader  w-full"),children:[Object(f.jsx)(_.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(f.jsxs)("div",{className:"p-6 ml-6 w-full  ",children:[Object(f.jsx)($,{}),(null===s||void 0===s||null===(t=s.user)||void 0===t?void 0:t.constructorPower)&&Object(f.jsx)(le,{setPosts:u}),(null===l||void 0===l?void 0:l.length)>0&&l.map((function(e){return Object(f.jsx)(ye,{postData:e,deletePost:N,editPost:k},e._id)}))]}),g&&Object(f.jsx)(Se,{updatePost:function(e){d.a.put("http://54.205.19.94/server/api/post/edit/".concat(e.postId),e,{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(t){_.b.success("Post Successfully Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0});var c=l.map((function(t){return t._id==e.postId?Object(I.a)({title:e.title,content:e.content},t):t}));u(c),w()})).catch((function(e){console.log(e)}))},editMOdalOpen:b,editModalClose:w,modalData:g})]})},Ie=c(24),_e=c.n(Ie),De=c(42),Ee=c(201),Pe=c(200),Be=function(){var e="h-20 transform  md:m-1 hover:scale-125 duration-300 ease-in-out w-20 m-2 cursor-pointer";return Object(f.jsxs)("div",{className:"bg-white shadow-md p-6 mt-4  rounded-2xl",children:[Object(f.jsxs)("div",{className:"flex items-center ",children:[Object(f.jsx)("img",{src:"https://yt3.ggpht.com/ytc/AKedOLTIbYSBxZvTQV8isj_TFE3KkXyyLBTxfdAypcfiqQ=s900-c-k-c0x00ffffff-no-rj",className:"h-16 rounded-full",alt:""}),Object(f.jsxs)("div",{className:"flex flex-col w-full ml-4",children:[Object(f.jsxs)("div",{className:"flex items-center space-x-2",children:[Object(f.jsx)("h1",{className:"text-dark text-lg inline",children:"shuhaib zahir "}),Object(f.jsx)(Pe.a,{size:"1.4rem",color:"green"})]}),Object(f.jsxs)("div",{className:"flex space-x-6 mt-2 capitalize text-center ",children:[Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("h1",{className:"text-dark-gray  ",children:"post"}),Object(f.jsx)("p",{className:"text-dark font-bold",children:"30"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"text-dark-gray  ",children:"follow"}),Object(f.jsx)("p",{className:"text-dark font-bold",children:"2560"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"text-dark-gray ",children:"following"}),Object(f.jsx)("p",{className:"text-dark font-bold",children:"175"})]})]})]})]}),Object(f.jsx)("hr",{className:"m-3"}),Object(f.jsxs)("div",{className:" px-3 md:px-1",children:[Object(f.jsxs)("div",{className:"flex items-center mb-4 justify-start space-x-3 text-dark text-lg",children:[Object(f.jsx)("p",{children:"photos"}),Object(f.jsx)(N.c,{size:"1.5rem"}),Object(f.jsx)(Ee.a,{size:"1.5rem"})]}),Object(f.jsxs)("div",{className:"flex flex-wrap justify-around items-center",children:[Object(f.jsx)("img",{src:"https://images.pexels.com/photos/936722/pexels-photo-936722.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",className:e,alt:""}),Object(f.jsx)("img",{src:"https://images.pexels.com/photos/302769/pexels-photo-302769.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",className:e,alt:""}),Object(f.jsx)("img",{src:"https://www.wallpaperuse.com/wallp/57-570065_m.jpg",className:"h-20 w-20 m-2",alt:""}),Object(f.jsx)("img",{src:"https://buildings.honeywell.com/content/dam/hbtbt/en/images/horizontal/street-view-buildings-2880x1440.jpg",className:e,alt:""}),Object(f.jsx)("img",{src:"https://cdn.britannica.com/73/114973-050-2DC46083/Midtown-Manhattan-Empire-State-Building-New-York.jpg",className:e,alt:""}),Object(f.jsx)("img",{src:"https://images.pexels.com/photos/936722/pexels-photo-936722.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",className:e,alt:""}),Object(f.jsx)("img",{src:"https://www.ul.com/sites/g/files/qbfpbp251/files/styles/hero_boxed_width/public/2020-07/glass-building-2400x1600.jpg?itok=0WE2lWhl ",className:e,alt:""}),Object(f.jsx)("img",{src:"https://images.pexels.com/photos/936722/pexels-photo-936722.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500",className:e,alt:""}),Object(f.jsx)("img",{src:"https://images.adsttc.com/media/images/5da5/56f8/3312/fd3f/6a00/0052/newsletter/1-O_Mbuildings_PhotoByBruceDamonte.jpg?1571116781",className:e,alt:""})]}),Object(f.jsx)("button",{className:"bg-pink hover:bg-dark-white hover:text-dark duration-300 h-10 text-white text-center my-3 hover:shadow-md rounded-full w-full",children:"Show more"})]})]})},Ae=Object(n.createContext)(null),Fe=function(e){e.currentUser;var t=e.conv,c=(e.getMessage,localStorage.getItem("userChecking")),a=p(c),s=Object(n.useContext)(Ae).changeChattingDetails,i=Object(n.useState)(null),o=Object(r.a)(i,2),l=o[0],u=o[1];Object(n.useEffect)((function(){var e=t.members.find((function(e){return e!==a.user._id})),c=function(){var t=Object(De.a)(_e.a.mark((function t(){var c;return _e.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("http://54.205.19.94/server/api/get/user/details/".concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}});case 2:c=t.sent,u(c.data.user);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();c()}),[]);var j=function(){var e=Object(De.a)(_e.a.mark((function e(t){return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("http://54.205.19.94/server/api/get/meesages/".concat(t._id),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var c={conversation:t,user:l,message:e.data.result};s(c)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:function(){return j(t)},children:[Object(f.jsxs)("div",{className:"flex space-x-4 items-center",children:[l&&Object(f.jsx)("img",{src:l.photo||"",className:"h-8 w-8 rounded-full",alt:""}),l&&Object(f.jsx)("h1",{children:l.username})]}),l&&Object(f.jsx)(v.b,{color:"green"})]})},Te=function(e){var t=e.conversation;return Object(f.jsx)("div",{className:"p-6 mt-3 overscroll-auto ",children:Object(f.jsx)("div",{className:"flex space-y-4 pb-4 flex-col",children:null===t||void 0===t?void 0:t.map((function(e){return Object(f.jsx)(Fe,{conv:e})}))})})},Le=function(e){var t=e.flex,c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1],o=localStorage.getItem("userChecking"),l=p(o);return Object(n.useEffect)((function(){var e=function(){var e=Object(De.a)(_e.a.mark((function e(){var t;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("http://54.205.19.94/server/api/get/conversation",{headers:{Authorization:"Bearer ".concat(l.token)}});case 3:t=e.sent,i(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsx)("div",{className:"min-h-withoutHeader bg-white-100  p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(f.jsxs)("div",{className:" h-96 p-4",children:[Object(f.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Profile"}),Object(f.jsx)(Be,{}),Object(f.jsx)("h1",{className:"uppercase text-xl mt-6 font-semibold text-dark-gray ",children:"Networks"}),Object(f.jsx)(Te,{conversation:s})]})})})},Ue=c(214),Me=function(e){var t=e.own,c=e.m;return Object(f.jsxs)("div",{className:" flex flex-col ".concat(t?" justify-end items-end  ":"justify-start items-start "),children:[Object(f.jsx)("div",{className:"   rounded-2xl m-3 p-3  ".concat(t?"justify-end   rounded-br-none bg-white shadow  ":"rounded-bl-none bg-pink text-white"),children:Object(f.jsx)("div",{className:"pl-3 ",children:Object(f.jsx)("p",{children:c.text})})}),Object(f.jsx)("p",{className:"".concat(t?" mr-3":"text-left ml-3"," text-sm"),children:Object(Ue.a)(c.createdAt)})]})},He=c(139),Re=function(e){e.closeChatBox,e.chattingData;var t=localStorage.getItem("userChecking"),c=p(t),a=Object(n.useContext)(Ae),s=a.chatDetails,i=a.changeChattingDetails,o=Object(n.useState)(""),u=Object(r.a)(o,2),j=u[0],h=u[1],b=Object(n.useRef)(null),x=Object(n.useState)(s.message),m=Object(r.a)(x,2),O=m[0],g=m[1];Object(n.useEffect)((function(){g(s.message)}),[]),Object(n.useEffect)((function(){b&&b.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[]);var v=Object(n.useState)(null),w=Object(r.a)(v,2),N=w[0],k=w[1],y=Object(n.useRef)();Object(n.useEffect)((function(){y.current=Object(He.a)("ws://54.205.19.94/websocket",{transports:["websocket"],rejectUnauthorized:!1}),y.current.on("getMessage",(function(e){k({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){N&&s.user._id==N.sender&&g((function(e){return[].concat(Object(l.a)(e),[N])}))}),[N]),Object(n.useEffect)((function(){y.current.emit("addUser",c.user._id),y.current.on("getUser",(function(e){}))}),[]);var C=function(){var e=Object(De.a)(_e.a.mark((function e(t){var n,a;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={conversationId:s.conversation._id,sender:c.user._id,text:j},e.prev=2,e.next=5,d.a.post("http://54.205.19.94/server/api/post/meesages",n,{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:a=e.sent,y.current.emit("sendMessage",{senderId:c.user._id,reciverId:s.user._id,text:j}),g((function(e){return[].concat(Object(l.a)(e),[a.data])})),h(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"p-4  ",children:[Object(f.jsxs)("div",{className:"flex items-center justify-between",children:[Object(f.jsxs)("div",{className:"flex items-center space-x-3  ",children:[Object(f.jsx)("img",{src:s.user.photo,className:"rounded-full w-14 h-14",alt:""}),Object(f.jsx)("h1",{children:s.user.username}),Object(f.jsx)("p",{className:"animate-bounce text-sm text-gray-400",children:"typing.."})]}),Object(f.jsx)(E.a,{onClick:function(){return i(null)},children:Object(f.jsx)(oe.a,{className:"text-pink"})})]}),Object(f.jsx)("hr",{className:"mt-3"}),Object(f.jsx)("div",{className:"h-56 overflow-auto px-4 ",ref:b,children:O.map((function(e,t){return Object(f.jsx)(Me,{m:e,own:s.user._id!==e.sender},t)}))}),Object(f.jsx)("div",{className:"  flex w-auto items-center  ",children:Object(f.jsxs)("form",{className:"flex bg-white shadow  h-24 p-2 items-center w-full h-auto rounded-full",onSubmit:C,children:[Object(f.jsx)("input",{type:"text",value:j,onChange:function(e){return h(e.target.value)},className:"w-full   outline-none ml-7 ",style:{background:"none"}}),Object(f.jsx)("button",{className:"p-3 p-x-6  text-white bg-pink rounded-full",children:"Send"})]})})]})},We=c(84),Ve=c.n(We),Je=c(78),qe=c.n(Je),Ze=function(e){var t=e.data,c=(e.changeState,localStorage.getItem("userChecking")),a=p(c),s=Object(n.useState)(!1),i=Object(r.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1];return Object(f.jsxs)("div",{className:"flex justify-between items-center bg-white-100 p-4 rounded-2xl",children:[Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:t.photo,className:"h-10 w-10 rounded-full",alt:""}),Object(f.jsx)("h3",{children:t.username}),h?Object(f.jsx)(Q.a,{color:"success"}):Object(f.jsx)(E.a,{children:o?Object(f.jsx)(qe.a,{color:"error",onClick:function(){return e=t._id,b(!0),void d.a.put("http://54.205.19.94/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){b(!1),l(!1)})).catch((function(e){b(!1)}));var e}}):Object(f.jsx)(Ve.a,{onClick:function(){return e=t._id,b(!0),void d.a.put("http://54.205.19.94/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){b(!1),l(!0)})).catch((function(e){b(!1),console.log(e)}));var e},className:!0})})]})},Ye=function(){var e=localStorage.getItem("userChecking"),t=p(e),c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/suggested/user",{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){i(e.data.users)})).catch((function(e){console.log(e)}))}),[]),Object(f.jsx)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48 overflow-auto",children:0==(null===s||void 0===s?void 0:s.length)?Object(f.jsx)("p",{children:"NO Suggession"}):null===s||void 0===s?void 0:s.map((function(e){return Object(f.jsx)(Ze,{data:e,changeState:i},e._id)}))})},Ge=function(e){var t=e.flex,c=localStorage.getItem("userChecking"),a=(p(c),Object(n.useContext)(Ae)),s=a.chatDetails,r=a.changeChattingDetails;return Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(f.jsxs)("div",{className:"",children:[Object(f.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Recomended Poepole"}),Object(f.jsx)(Ye,{})]}),Object(f.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(f.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(f.jsxs)("div",{className:" px-6  ",children:[Object(f.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(N.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(f.jsx)(i.b,{to:"/",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(f.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(f.jsx)(i.b,{to:"/following",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]})]}),s&&Object(f.jsx)("div",{className:"px-4 fixed bg-white-100 h-96 bottom-10 rounded-2xl w-1/4 right-10",children:Object(f.jsx)(Re,{closeChatBox:r,chattingData:s})})]})})},Ke=function(){var e,t=Object(o.g)(),c=localStorage.getItem("userChecking");return c&&(e=p(c)),e?Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(Le,{flex:"flex-1"}),Object(f.jsx)(ze,{flex:"flex-3"}),Object(f.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},Qe=c(4),Xe=c(453),$e=c(205),et=c(455),tt=c(452),ct=c(206),nt=c.n(ct),at=c(207),st=c.n(at),rt=Object(f.jsx)(nt.a,{fontSize:"small"}),it=Object(f.jsx)(st.a,{fontSize:"small"});function ot(e){var t=e.locationDetails,c=e.prefferdlocationDataCheck,a=Object(n.useState)([]),s=Object(r.a)(a,2),i=s[0],o=s[1],l=function(){var e=Object(De.a)(_e.a.mark((function e(t){return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object($e.geocodeByAddress)(t).then((function(e){o(e[0].address_components)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(tt.a,{onChange:function(e,c){t((function(e){return Object(I.a)(Object(I.a)({},e),{},{preferredLocation:c.map((function(e){return e.long_name}))})}))},multiple:!0,id:"checkboxes-tags-demo",options:i,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.long_name},renderOption:function(e,t,c){var n=c.selected;return Object(f.jsxs)("li",Object(I.a)(Object(I.a)({},e),{},{children:[Object(f.jsx)(et.a,{icon:rt,checkedIcon:it,style:{marginRight:8},checked:n}),t.long_name]}))},style:{width:500},renderInput:function(e){return Object(f.jsx)(ge.a,Object(I.a)(Object(I.a)({error:c},e),{},{label:"Select Prefered Locations",placeholder:"Locations",onChange:function(e){l(e.target.value)}}))}})}var lt=c(212),ut=c(475),dt=c(72),jt=c.n(dt),ht=Object(n.createContext)(null),bt=c(208),xt=Object(Xe.a)((function(e){return{inputfull:{width:"90%","& label.Mui-focused":{color:"#152D35"}},textColor:{"& label.Mui-focused":{color:"#152D35"}}}})),mt=Object(lt.a)({palette:{primary:{main:"#9D9D9D"}}}),pt=function(){var e=Object(o.g)(),t=Object(n.useContext)(ht).setUserDataFromServer,c=xt(),a=Object(n.useState)(!0),s=Object(r.a)(a,2),i=s[0],l=s[1],u=Object(n.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(n.useState)(!1),O=Object(r.a)(x,2),g=O[0],v=O[1],w=Object(n.useState)(!1),N=Object(r.a)(w,2),k=N[0],y=N[1],S=Object(n.useState)(!1),z=Object(r.a)(S,2),_=z[0],D=z[1],E=Object(n.useState)(!1),P=Object(r.a)(E,2),B=P[0],A=P[1],F=Object(n.useState)(!1),L=Object(r.a)(F,2),U=L[0],M=L[1],H=Object(n.useState)({username:"",email:"",phone:"",password:"",confirmPassword:"",preferredLocation:""}),R=Object(r.a)(H,2),W=R[0],V=R[1],J=function(e){var t=e.target.name,c=e.target.value;V((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Qe.a)({},t,c))}))},q=Object(n.useState)(),Z=Object(r.a)(q,2),Y=Z[0],G=Z[1],K=Object(n.useState)(""),Q=Object(r.a)(K,2),X=Q[0],$=Q[1],ee=Object(n.useState)(!1),ce=Object(r.a)(ee,2),ne=ce[0],se=ce[1],re=Object(n.useState)({email:"",password:""}),ie=Object(r.a)(re,2),oe=ie[0],le=ie[1],ue=localStorage.getItem("userChecking");if(ue&&p(ue))return e.push("/"),!0;return Object(f.jsx)(ut.a,{theme:mt,children:Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsx)("div",{className:"flex-1 h-screen bg-signin relative bg-cover bg-no-repeat",children:Object(f.jsxs)("div",{className:" ".concat(i?"bg-pink bg-opacity-60":"bg-black bg-opacity-60"," text-center flex items-center  flex-col  justify-center space-y-5 h-screen w-full absolute top-0 left-0 p-6"),children:[Object(f.jsx)("h1",{className:"text-white font-main text-5xl",children:"Skyline"}),Object(f.jsxs)("h1",{className:"text-white text-3xl ",children:[" ",i?"Open":"Hurry up !"," ",Object(f.jsx)("br",{})," Door to Your Greate Dream"]})]})}),Object(f.jsx)("div",{className:"flex-3 bg-white-100 ",children:i?Object(f.jsx)("div",{className:"relative flex justify-center",children:Object(f.jsxs)("div",{className:" flex items-center w-1/2   relative flex-col justify-center  space-y-5 h-screen p-6",children:[Object(f.jsxs)("h1",{className:"text-2xl",children:[" ","Sign In to"," ",Object(f.jsx)("span",{className:"text-pink capitalize font-bold",children:"skyline"})," "]}),Object(f.jsx)("div",{className:"w-1/2 rounded-full ".concat(U?"":"hidden"),children:Object(f.jsx)(ae.a,{})}),Object(f.jsx)(ge.a,{id:"outlined-email",error:ne,value:oe.email||"",className:c.inputfull,onChange:function(e){!function(e){var t=jt.a.isEmail(e.target.value);se(!t),le((function(){return Object(I.a)(Object(I.a)({},oe),{},{email:e.target.value})}))}(e)},label:"".concat(ne?"Invalid Email":"Email"),variant:"outlined"}),Object(f.jsx)(ge.a,{id:"outlined-pass",className:c.inputfull,onChange:function(e){!function(e){le((function(t){return Object(I.a)(Object(I.a)({},t),{},{password:e.target.value})}))}(e)},label:"Enter Password",variant:"outlined"}),Object(f.jsx)("p",{children:X}),Object(f.jsxs)("div",{className:"w-full px-7  flex items-center justify-between",children:[Object(f.jsxs)(T.a,{variant:"contained",style:{backgroundColor:"#FF005C",color:"#ffff"},onClick:function(){!1===ne?(M(!0),d.a.post("http://54.205.19.94/server/api/userSignin",oe,{headers:{"content-type":"application/json"}}).then((function(c){var n=m(c.data);localStorage.setItem("userChecking",n),t(c.data),M(!1),e.push("/")})).catch((function(e){var t,c;M(!1),console.log(e);var n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.apiError;n&&$(n)}))):alert("Please Enter Valid Details")},endIcon:Object(f.jsx)(te.a,{}),children:[" ","Sign In"]}),Object(f.jsxs)("p",{className:"  ml-4",children:["Doesn't have an account?"," ",Object(f.jsx)(C.a,{onClick:function(){l(!i)},className:"inline ml-4 text-dark-gray hover:text-pink cursor-pointer",size:"1.6rem "})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(bt.GoogleLogin,{clientId:"758095114048-3f9nic38mdvfolj12rmva0ce2g9hi15v.apps.googleusercontent.com",buttonText:"Sign Or Sign UP with Google",onSuccess:function(c){d.a.post("http://54.205.19.94/server/api/signin/with/google",c.profileObj).then((function(c){var n=m(c.data);localStorage.setItem("userChecking",n),t(c.data),e.push("/")}))},onFailure:function(e){},cookiePolicy:"single_host_origin"}),","]})]})}):Object(f.jsx)("div",{className:"relative flex justify-center",children:Object(f.jsxs)("div",{className:" flex items-center w-1/2   relative flex-col justify-center  space-y-5 h-screen p-6",children:[Object(f.jsxs)("h1",{className:"text-2xl",children:[" ","Sign up to"," ",Object(f.jsx)("span",{className:"text-pink capitalize font-bold",children:"skyline"})," "]}),Object(f.jsx)("div",{className:"w-1/2 rounded-full ".concat(U?"":"hidden"),children:Object(f.jsx)(ae.a,{})}),Object(f.jsxs)("div",{className:"space-x-4  ",children:[Object(f.jsx)(ge.a,{id:"outlined-username",name:"username",value:W.username,className:c.textColor,error:h,onChange:function(e){!function(e){var t=jt.a.isAlpha(e.target.value,"en-US",{ignore:" "});b(!t),J(e)}(e)},label:"".concat(h?"Invalid UserName":"Username"),variant:"outlined"}),Object(f.jsx)(ge.a,{id:"outlined-email",name:"email",value:W.email,className:c.textColor,error:B,onChange:function(e){!function(e){var t=jt.a.isEmail(e.target.value);A(!t),J(e)}(e)},label:"".concat(B?"Invalid Email":"Email"),variant:"outlined"})]}),Object(f.jsx)(ge.a,{id:"outlined-phone",name:"phone",value:W.phone,className:c.inputfull,error:_,onChange:function(e){!function(e){var t=jt.a.isNumeric(e.target.value),c=jt.a.isLength(e.target.value,{min:10,max:10});D(!t||!c),J(e)}(e)},label:"".concat(_?"Invalid Phone Number":"Phone Number"),variant:"outlined"}),Object(f.jsx)(ge.a,{id:"outlined-password",name:"password",value:W.password,className:c.inputfull,error:g,onChange:function(e){!function(e){var t=jt.a.isEmpty(e.target.value),c=jt.a.isLength(e.target.value,{min:4});v(!c||!1!==t),J(e)}(e)},label:"".concat(g?"Enter at least 4 characters":"password"),variant:"outlined"}),Object(f.jsx)(ge.a,{id:"outlined-cpass",name:"confirmPassword",value:W.confirmPassword,className:c.inputfull,error:k,onChange:function(e){!function(e){W.password===e.target.value?y(!1):y(!0),J(e)}(e)},label:"".concat(k?"Password didn't match":"Confrim Password"),variant:"outlined"}),Object(f.jsx)("div",{style:{width:"90%"},children:Object(f.jsx)(ot,{locationDetails:V})}),Object(f.jsx)("p",{className:"text-red-400",children:Y||""}),Object(f.jsxs)("div",{className:"w-full px-7  flex items-center justify-between",children:[Object(f.jsxs)(T.a,{variant:"contained",style:{color:"#ffff"},onClick:function(){G(""),W.username?W.password?W.confirmPassword?0===W.preferredLocation.length?alert("please Select Perfered location"):h||g||k||_||B||!(W.preferredLocation.length>0)?alert("please Enter Details"):(M(!0),d.a.post("http://54.205.19.94/server/api/userSignup",W,{headers:{"content-type":"application/json"}}).then((function(c){console.log(c),M(!1);var n=m(c.data);localStorage.setItem("userChecking",n),t(c.data),e.push("/")})).catch((function(e){var t,c,n;M(!1),console.log("error found");var a=null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.error,s=null===e||void 0===e||null===(c=e.response)||void 0===c||null===(n=c.data)||void 0===n?void 0:n.apiError;a&&a.error.forEach((function(e){e.phone?D(!0):e.email&&A(!0)})),s?G(s):console.log(e)}))):y(!0):v(!0):b(!0)},endIcon:Object(f.jsx)(te.a,{}),children:[" ","Sign Up"]}),Object(f.jsxs)("p",{className:"  ml-4",children:["Do you have already account?"," ",Object(f.jsx)(C.a,{onClick:function(){l(!i)},className:"inline ml-4 text-dark-gray hover:text-pink cursor-pointer",size:"1.6rem "})]})]})]})})})]})})},ft=function(){return(0,Object(n.useContext)(ht).setUserDataFromServer)(""),localStorage.removeItem("userChecking"),Object(f.jsx)(o.a,{to:"/signin"})},Ot=c(210),gt=c.n(Ot),vt=c(211),wt=c.n(vt),Nt=Object(D.a)("input")({display:"none"}),kt=function(e){var t,c=e.userPost,a=localStorage.getItem("userChecking"),s=p(a),i=Object(n.useState)(),o=Object(r.a)(i,2),l=o[0],u=o[1],j=Object(n.useState)(""),h=Object(r.a)(j,2),b=h[0],x=h[1],O=Object(n.useState)(!1),g=Object(r.a)(O,2),v=g[0],w=g[1],N=Object(n.useState)([]),k=Object(r.a)(N,2),y=k[0],C=k[1],S=Object(n.useState)([]),z=Object(r.a)(S,2),D=z[0],P=z[1],B=Object(n.useState)(!1),A=Object(r.a)(B,2),F=A[0],U=A[1];Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/info",{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){var t=localStorage.getItem("userChecking"),c=p(t),n=Object(I.a)({},e.data.user),a=Object(I.a)({user:n},c),s=m(a);localStorage.setItem("userChecking",s);var r=e.data.user.photo||"";u(r)})).catch((function(e){console.log(e)}))}),[]);return Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){var t,c,n=(null===(t=e.data.result[0])||void 0===t?void 0:t.followers)?e.data.result[0].followers:[],a=(null===(c=e.data.result[0])||void 0===c?void 0:c.following)?e.data.result[0].following:[];C(n),P(a)})).catch((function(e){console.log(e)}))}),[]),Object(f.jsxs)("div",{className:"shadow p-4 rounded-2xl relative ",children:[Object(f.jsx)(_.a,{}),Object(f.jsx)("div",{className:"h-48 overflow-hidden flex items-center rounded-2xl",children:Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:"",className:"w-full  ",alt:""})}),Object(f.jsxs)("div",{className:"rounded-2xl flex items-center  ",children:[Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png"},src:l,className:"w-36 h-36 rounded-full  -mt-20 ml-5",alt:""}),Object(f.jsxs)("div",{className:"p-3 flex justify-between w-full items-center ",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"text-xl text-pink font-bold",children:(null===(t=s.user)||void 0===t?void 0:t.username)||""}),Object(f.jsx)("p",{className:"w-26",children:"".concat(s.user.constructorPower?s.user.services.join(" "):"")})]}),v?Object(f.jsxs)(L.a,{variant:"outlined",children:[Object(f.jsx)(T.a,{onClick:function(){!function(){w(!1),U(!0);var e=new FormData;e.append("file",b),console.log(e),d.a.put("http://54.205.19.94/server/api/profile-pic/upload",e,{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){Object(_.b)("Profile Picture Updated!"),U(!1);var t=Object(I.a)({},e.data.user),c=localStorage.getItem("userChecking"),n=p(c),a=Object(I.a)({user:t},n),s=m(a);localStorage.setItem("userChecking",s),u(e.data.user.photo)})).catch((function(e){Object(_.b)("try agin later!"),w(!1),U(!1),console.log(e)}))}()},children:Object(f.jsx)(M.a,{})}),Object(f.jsx)(T.a,{onClick:function(){!function(){var e=localStorage.getItem("userChecking"),t=p(e).user.photo;u(t),w(!1)}()},color:"error",children:Object(f.jsx)(R.a,{})})]}):Object(f.jsx)(T.a,{variant:"outlined",endIcon:Object(f.jsx)(gt.a,{}),children:"Edit Profile"})]})]}),Object(f.jsx)("div",{className:" inline absolute bg-white-100 rounded-full -mt-10 ml-3",children:Object(f.jsxs)("label",{htmlFor:"icon-button-file",children:[Object(f.jsx)(Nt,{accept:"image/*",onChange:function(e){return function(e){var t=URL.createObjectURL(e.target.files[0]);x(e.target.files[0]),w(!0),u(t)}(e)},id:"icon-button-file",type:"file"}),Object(f.jsx)(E.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(f.jsx)(wt.a,{})})]})}),Object(f.jsxs)("div",{className:"shadow bg-pink text-white flex text-center p-3 rounded-3xl mt-3 items-center justify-around",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Followers"}),Object(f.jsx)("p",{children:y.length})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Following"}),Object(f.jsx)("p",{children:D.length})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Posts"}),Object(f.jsx)("p",{children:c.length})]})]}),Object(f.jsx)("div",{className:"w-full mt-3 ".concat(!F&&"hidden"),children:Object(f.jsx)(ae.a,{})})]})},yt=function(e){var t=e.flex,c=(Object(n.useContext)(ht).userDataFromDatabase,localStorage.getItem("userChecking")),a=p(c),s=Object(n.useState)([]),i=Object(r.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(!1),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(n.useState)(null),m=Object(r.a)(x,2),O=m[0],g=m[1],v=function(){g(null),b(!1)},w=function(e){d.a.delete("http://54.205.19.94/server/api/post/delete/".concat(e),{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(t){_.b.success("Post Successfully Deleted",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),l((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){console.log(e)}))};Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api//user/own/post",{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){l(e.data.posts)})).catch((function(e){console.log(e)}))}),[]);var N=function(e){g(e),b(!0)};return Object(f.jsxs)("div",{className:"".concat(t," min-h-withoutHeader w-full"),children:[Object(f.jsx)(_.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(f.jsxs)("div",{className:"p-6 ml-6 w-full ",children:[Object(f.jsx)("div",{className:"bg-re-400",children:Object(f.jsx)(kt,{userPost:o})}),o.map((function(e,t){return Object(f.jsx)(ye,{postData:e,deletePost:w,editPost:N},t)}))]}),O&&Object(f.jsx)(Se,{updatePost:function(e){d.a.put("http://54.205.19.94/server/api/post/edit/".concat(e.postId),e,{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(t){_.b.success("Post Successfully Updated",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),l((function(){return o.map((function(t){return t._id==e.postId?Object(I.a)({title:e.title,content:e.content},t):t}))})),v()})).catch((function(e){console.log(e)}))},editMOdalOpen:h,editModalClose:v,modalData:O})]})},Ct=c(59),St=c(465),zt=c(462),It=c(474),_t=c(460),Dt=c(466),Et={PaperProps:{style:{maxHeight:224,width:250}}},Pt=["Civil & Structural Concrete","Masonry and Plaster","Architectural and Finishing Works.","Pre Cast.","Pre Engineered Structures.","HVAC, Plumbing and Electrical.","Waterproofing and Insulation.","Human Resource Deployment & Management."];function Bt(e,t,c){return{fontWeight:-1===t.indexOf(e)?c.typography.fontWeightRegular:c.typography.fontWeightMedium}}function At(e){var t=e.services,c=e.setServices,n=e.setContractor,a=Object(Ct.a)();return Object(f.jsx)("div",{className:" px-3 mt-4",children:Object(f.jsxs)(It.a,{sx:{m:1,width:"100%"},children:[Object(f.jsx)(zt.a,{id:"getServices",children:"Services"}),Object(f.jsx)(_t.a,{labelId:"services",multiple:!0,value:t,onChange:function(e){var t=e.target.value;c("string"===typeof t?t.split(","):t),n((function(e){return Object(I.a)(Object(I.a)({},e),{},{services:t})}))},input:Object(f.jsx)(St.a,{id:"select-multiple-chip",label:"Services"}),renderValue:function(e){return Object(f.jsx)(V.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(f.jsx)(Dt.a,{label:e},e)}))})},MenuProps:Et,children:Pt.map((function(e){return Object(f.jsx)(we.a,{value:e,style:Bt(e,t,a),children:e},e)}))})]})})}var Ft=Object(Xe.a)({btn:{backgroundColor:"#FF005C",margin:"10px"}}),Tt=function(e){var t=e.modalClose,c=Object(n.useContext)(ht),a=(c.userDataFromDatabase,c.setUserDataFromServer,localStorage.getItem("userChecking")),s=p(a),i=Ft(),o=Object(n.useState)([]),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(n.useState)(""),b=Object(r.a)(h,2),x=b[0],O=b[1],g=Object(n.useState)(!1),v=Object(r.a)(g,2),w=v[0],N=v[1],k=Object(n.useState)({constructorId:"",companyName:"",address:"",services:[]}),y=Object(r.a)(k,2),C=y[0],S=y[1],z=function(e){var t=e.target.name,c=e.target.value;S((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(Qe.a)({},t,c))}))};return Object(f.jsxs)("div",{className:"",children:[w&&Object(f.jsx)(ae.a,{color:"primary"}),Object(f.jsx)("div",{className:"m-3",children:Object(f.jsx)(ge.a,{id:"standard-basic",name:"companyName",value:C.companyName,onChange:z,label:"Company Name ",fullWidth:!0,variant:"standard"})}),Object(f.jsx)("div",{className:"m-3",children:Object(f.jsx)(ge.a,{id:"standard-basic",name:"constructorId",value:C.constructorId,onChange:z,label:"Constructor Id ",fullWidth:!0,variant:"standard"})}),Object(f.jsx)("div",{className:"m-3",children:Object(f.jsx)(ge.a,{id:"standard-basic",name:"address",value:C.address,onChange:z,label:"Address ",fullWidth:!0,variant:"standard"})}),Object(f.jsx)("div",{className:" -ml-3",children:Object(f.jsx)(At,{setServices:j,services:u,setContractor:S})}),Object(f.jsx)("div",{children:Object(f.jsx)("p",{className:"text-red-600 m-2",children:x})}),Object(f.jsx)(T.a,{variant:"contained",onClick:function(){C.constructorId.length<=4?O("Invalid Constructor Id"):C.companyName.length<=2?O("Invalid Company Name"):C.address.length<=4?O("Invalid Address"):0!=C.services.length?(O(""),N(!0),d.a.put("http://54.205.19.94/server/api/constructor/apply/",C,{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){N(!1);var c=localStorage.getItem("userChecking"),n=p(c);console.log(n,"this is from local");var a=Object(I.a)(Object(I.a)({},n),{},{user:e.data.user}),s=m(a);localStorage.setItem("userChecking",s),t()})).catch((function(e){O(null===e||void 0===e?void 0:e.data.apiError),console.log(e)}))):O("Please Select Services")},className:i.btn,endIcon:Object(f.jsx)(te.a,{}),children:"Apply"})]})},Lt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"30%",bgcolor:"background.paper",boxShadow:24,p:4};function Ut(e){var t=e.open,c=e.handleClose;return Object(f.jsx)("div",{children:Object(f.jsx)(J.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,onClose:c,closeAfterTransition:!0,BackdropComponent:W.a,BackdropProps:{timeout:500},children:Object(f.jsx)(q.a,{in:t,children:Object(f.jsx)(V.a,{sx:Lt,className:"rounded-2xl",children:Object(f.jsx)(Tt,{modalClose:c})})})})})}var Mt=function(e){var t=e.flex,c=Object(n.useContext)(Ae),a=c.chatDetails,s=c.setChatting,o=localStorage.getItem("userChecking"),l=p(o);console.log(l,"+++++++");var u=Object(n.useState)(!1),d=Object(r.a)(u,2),j=d[0],h=d[1],b=function(){return h(!0)};return Object(f.jsxs)("div",{className:"".concat(t," "),children:[Object(f.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(f.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(f.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(f.jsxs)("div",{className:"space-y-4 px-6 py-4",children:[Object(f.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(N.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "}),Object(f.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(f.jsx)(i.b,{to:"/",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(f.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(f.jsx)(i.b,{to:"/following",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"}),Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]}),function(){var e,t,c;return!("yes"!==(null===l||void 0===l||null===(e=l.user)||void 0===e?void 0:e.applied)||!(null===l||void 0===l||null===(t=l.user)||void 0===t?void 0:t.constructorPower))||("pending"===(null===l||void 0===l||null===(c=l.user)||void 0===c?void 0:c.applied)?Object(f.jsx)("button",{disabled:!0,type:"button",className:"flex group bg-dark-gray h-16 duration-300 w-full justify-center space-x-4 items-center  p-3 rounded-2xl ",children:Object(f.jsx)("span",{className:"text-xl text-white ",children:"Applied "})}):Object(f.jsx)("button",{onClick:b,type:"button",className:"flex group hover:bg-dark-gray h-16 duration-300 w-full justify-center space-x-4 items-center bg-pink p-3 rounded-2xl ",children:Object(f.jsx)("span",{className:"text-xl text-white ",children:"Apply for contractor"})}))}(),l.user.rejected&&Object(f.jsx)("p",{className:"text-red-400 text-xl",children:"Application Rejected"})]}),Object(f.jsx)("div",{className:"px-4",children:a&&Object(f.jsx)(Re,{closeChatBox:s,chattingData:a})})]}),Object(f.jsx)(Ut,{open:j,handleOpen:b,handleClose:function(){return h(!1)}})]})},Ht=function(){var e=Object(o.g)(),t=localStorage.getItem("userChecking");return p(t)?Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(Le,{flex:"flex-1"}),Object(f.jsx)(yt,{flex:"flex-3"}),Object(f.jsx)(Mt,{flex:"flex-1"})]}):(e.push("/signin"),!0)},Rt=function(e){var t=e.data,c=e.postData,a=e.usersId,s=localStorage.getItem("userChecking"),i=p(s),o=Object(n.useState)([]),u=Object(r.a)(o,2),j=u[0],h=u[1],b=Object(n.useState)([]),x=Object(r.a)(b,2),m=x[0],O=x[1],g=Object(n.useState)(!1),v=Object(r.a)(g,2),w=v[0],N=v[1];Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/network/data/".concat(a),{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){h(e.data.result.followers),O(e.data.result.following)})).catch((function(e){console.log(e)}))}),[]);return Object(f.jsxs)("div",{className:"shadow p-4 rounded-2xl relative ",children:[Object(f.jsx)("div",{className:"h-48 overflow-hidden flex items-center rounded-2xl",children:Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:"",className:"w-full  ",alt:""})}),Object(f.jsxs)("div",{className:"rounded-2xl flex items-center  ",children:[Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://global-uploads.webflow.com/5e4627609401e01182af1cce/5eb13bfdb4659efea4f8dace_profile-dummy.png"},src:t.photo,className:"w-36 h-36 rounded-full  -mt-20 ml-5",alt:""}),Object(f.jsxs)("div",{className:"p-3 flex justify-between w-full items-center ",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:"text-xl text-pink font-bold",children:t.username}),Object(f.jsx)("p",{className:"w-26",children:t.services})]}),Object(f.jsx)("div",{children:function(){if(t._id!==i.user._id)return w?Object(f.jsx)(Q.a,{color:"success"}):j.some((function(e){return e==i.user._id}))?Object(f.jsx)(qe.a,{color:"error",onClick:function(){return e=t._id,N(!0),void d.a.put("http://54.205.19.94/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){N(!1),h((function(e){return e.filter((function(e){return e!==i.user._id}))}))})).catch((function(e){}));var e}}):Object(f.jsxs)(E.a,{children:[" ",Object(f.jsx)(Ve.a,{onClick:function(){return e=t._id,N(!0),void d.a.put("http://54.205.19.94/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(i.token)}}).then((function(e){N(!1),h((function(e){return[].concat(Object(l.a)(e),[i.user._id])}))})).catch((function(e){N(!1),console.log(e)}));var e},className:!0})]})}()})]})]}),Object(f.jsxs)("div",{className:"shadow bg-pink text-white flex text-center p-3 rounded-3xl mt-3 items-center justify-around",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Followers"}),Object(f.jsx)("p",{children:j.length})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Following"}),Object(f.jsx)("p",{children:m.length})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:"Posts"}),Object(f.jsx)("p",{children:c.length})]})]})]})},Wt=function(e){var t=e.postData,c=localStorage.getItem("userChecking"),a=p(c),s=Object(n.useState)(t),o=Object(r.a)(s,2),u=o[0],j=o[1],h=t.comments||[],b=Object(n.useState)(h),x=Object(r.a)(b,2),m=x[0],O=x[1],g=Object(n.useState)(),v=Object(r.a)(g,2),w=v[0],N=v[1],k=Object(n.useState)(!1),y=Object(r.a)(k,2),C=y[0],S=y[1],z=function(){S(!0)},D=Object(n.useState)(null),E=Object(r.a)(D,2),P=E[0],B=(E[1],Boolean(P),Object(n.useState)(null)),A=Object(r.a)(B,2),F=A[0],T=A[1],L=Boolean(F),U=function(e){T(e.currentTarget)},M=function(e){T(null)},H=function(){d.a.put("http://54.205.19.94/server/api/post/dislike/".concat(u._id),{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){j((function(e){var t=e.like.filter((function(e){return e!==a.user._id}));return Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},R=function(){d.a.put("http://54.205.19.94/server/api/post/like/".concat(u._id),{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){j((function(e){var t=Object(l.a)(e.like);return t.push(a.user._id),Object(I.a)(Object(I.a)({},e),{},{like:t})}))})).catch((function(e){console.log(e.data)}))},W=Object(n.useRef)(null);Object(n.useEffect)((function(){W&&W.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[m]);return Object(f.jsxs)("div",{children:[Object(f.jsx)(_.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!1,draggable:!0,pauseOnHover:!0}),Object(f.jsxs)("div",{className:"shadow  rounded-2xl mb-10 p-4",children:[Object(f.jsx)("div",{className:"p-3 flex justify-between items-center ",children:Object(f.jsx)(i.b,{to:"/user/profile/".concat(t.user),children:Object(f.jsxs)("div",{className:" space-x-4 flex items-center",children:[Object(f.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-12 h-12  rounded-full",alt:""}),Object(f.jsxs)("div",{className:"text-sm text-dark-gray",children:[Object(f.jsx)("p",{children:"shuhaib"}),function(e){var t=(new Date).toDateString(),c=new Date(e).toDateString(),n=new Date(e).toLocaleTimeString();return t==c?Object(f.jsx)("p",{children:"Today ".concat(n)}):Object(f.jsx)("p",{children:c})}(u.date)]})]})})}),Object(f.jsxs)("div",{className:"p-4  mb-4",children:[Object(f.jsx)("h1",{className:"text-lg mb-2",children:u.title}),Object(f.jsx)("p",{className:"text-gray-700",children:u.content})]}),u.videoType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)(re.a,{controls:!0,width:"100%",url:u.mediaLink})}):u.imageType?Object(f.jsx)("div",{className:"flex justify-center",children:Object(f.jsx)("img",{src:u.mediaLink,alt:""})}):void 0,Object(f.jsxs)("div",{className:"flex justify-between  p-4",children:[Object(f.jsxs)("div",{className:"space-x-3 text-3xl ",children:[function(e){var t=e.length;return-1!==e.findIndex((function(e){return e==a.user._id}))?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(he.a,{className:"cursor-pointer ",color:"error",fontSize:"string",onClick:function(){return H()}}),Object(f.jsx)("span",{className:"text-sm",children:t})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(xe.a,{className:"cursor-pointer ",fontSize:"string",onClick:function(){return R()}}),Object(f.jsx)("span",{className:"text-sm",children:t})]})}(u.like),Object(f.jsx)(pe.a,{className:"cursor-pointer",fontSize:"string",onClick:function(){return z()}}),Object(f.jsx)("span",{className:"text-sm cursor-pointer",onClick:function(){return z()},children:"View All"})]}),Object(f.jsx)(Oe.a,{className:"cursor-pointer text-3xl",fontSize:"string"})]}),Object(f.jsx)("div",{className:" max-h-40 overflow-auto",ref:W,children:m.map((function(e){return Object(f.jsx)("div",{className:" p-2 ",children:Object(f.jsxs)("div",{className:"flex  bg-white-100 items-center p-5 rounded-2xl rounded-bl-none justify-between",children:[Object(f.jsxs)("div",{className:"flex space-x-2",children:[Object(f.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1390886031851855880/wktTnTP3_400x400.jpg",className:"w-8 h-8 rounded-full",alt:""}),Object(f.jsx)("p",{className:"text-sm  ",children:e.comment})]}),Object(f.jsx)(ve.a,{anchorEl:F,open:L,onClose:M,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:Object(f.jsx)(we.a,{onClick:function(){var c;M(),c=e,d.a.put("http://54.205.19.94/server/api/delete/comment/".concat(t._id,"/").concat(c._id),{},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){_.b.success("Comment Deleted !",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0}),O((function(e){return e.filter((function(e){return e._id!==c._id}))}))}))},children:"Delete"})}),e.user==a.user._id&&Object(f.jsx)(de.a,{className:"cursor-pointer",onClick:U})]})})}))}),Object(f.jsxs)("div",{className:"w-full p-4 flex items-center",children:[Object(f.jsx)(ge.a,{id:"standard-basic",fullWidth:!0,label:"Leave a comment",variant:"standard",value:w,onChange:function(e){return N(e.target.value)}}),Object(f.jsx)(te.a,{className:"cursor-pointer ",onClick:function(){return function(e){console.log(e),w.replaceAll(" ","").length>1&&d.a.put("http://54.205.19.94/server/api/post/add/comment/".concat(e._id),{comment:w},{headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){var t=e.data.result;N(""),O((function(e){return[].concat(Object(l.a)(e),[t])}))})).catch((function(e){console.log(e)}))}(t)}})]})]}),Object(f.jsx)(ke,{commentMOdalOpen:C,commentMOdalClose:function(){S(!1)},comments:m})]})},Vt=function(e){var t=e.flex,c=Object(o.h)().userId,a=localStorage.getItem("userChecking"),s=p(a),i=Object(n.useState)([]),l=Object(r.a)(i,2),u=l[0],j=l[1],h=Object(n.useState)(""),b=Object(r.a)(h,2),x=b[0],m=b[1];return Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/profile/".concat(c),{headers:{Authorization:"Bearer ".concat(s.token)}}).then((function(e){var t=e.data.result.posts,c=e.data.result.user;j(t),m(c)})).catch((function(e){console.log(e)}))}),[]),Object(f.jsx)("div",{className:"".concat(t," min-h-withoutHeader w-full"),children:Object(f.jsxs)("div",{className:"p-6 ml-6 w-full ",children:[Object(f.jsx)("div",{className:"bg-re-400",children:Object(f.jsx)(Rt,{data:x,usersId:c,postData:u})}),u.map((function(e){return Object(f.jsx)(Wt,{postData:e})}))]})})},Jt=function(e){var t=e.flex,c=Object(n.useContext)(Ae),a=c.chatDetails,s=c.setChatting,r=localStorage.getItem("userChecking");p(r);return Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsxs)("div",{className:"min-h-withoutHeader   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:[Object(f.jsxs)("div",{className:"px-6 py-4 space-y-4 mt-3 h-48   ",children:[Object(f.jsx)("h1",{className:"uppercase text-xl font-semibold text-dark-gray ",children:"Options"}),Object(f.jsx)("div",{className:"space-y-4 px-6 py-4",children:Object(f.jsxs)("div",{className:" px-6  ",children:[Object(f.jsx)(i.b,{to:"/profile",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(N.c,{size:"1.5rem",className:"text-dark-gray  hover:text-pink  hover:mr-4 duration-300 ease-linear "})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray hover:px-4 duration-300 ease-linear hover:text-pink",children:"Posts"})]})}),Object(f.jsx)(i.b,{to:"/",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(w.a,{size:"1.5rem",className:"text-dark-gray  hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink ",children:"Event"})]})}),Object(f.jsx)(i.b,{to:"/followers",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.c,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Followers"})]})}),Object(f.jsx)(i.b,{to:"/following",className:"m-2",children:Object(f.jsxs)("div",{className:"flex items-center justify-start space-x-3 cursor-pointer  ",children:[Object(f.jsx)(v.d,{size:"1.5rem",className:"text-dark-gray   hover:text-pink hover:mr-4 duration-300 ease-linear"})," ",Object(f.jsx)("h1",{className:"text-xl text-dark-gray  hover:px-4 duration-300 ease-linear hover:text-pink",children:"Following"})]})})]})})]}),Object(f.jsx)("div",{className:"px-4",children:a&&Object(f.jsx)(Re,{closeChatBox:s,chattingData:a})})]})})},qt=function(){var e=Object(o.g)(),t=localStorage.getItem("userChecking");return p(t)?Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(Le,{flex:"flex-1"}),Object(f.jsx)(Vt,{flex:"flex-3"}),Object(f.jsx)(Jt,{flex:"flex-1"})]}):(e.push("/signin"),!0)},Zt=function(e){var t=e.userData,c=e.Following,a=Object(n.useState)(!1),s=Object(r.a)(a,2),o=s[0],l=s[1],u=localStorage.getItem("userChecking"),j=p(u),h=Object(n.useState)(null),b=Object(r.a)(h,2),x=b[0],m=b[1];Object(n.useEffect)((function(){c.some((function(e){return e._id===t._id}))&&m(!0)}),[]);return Object(f.jsx)("div",{className:"m-4",children:Object(f.jsxs)("div",{className:"w-52  shadow  h-60 p-4 flex flex-col items-center justify-center rounded-3xl ",children:[Object(f.jsx)(i.b,{to:"/user/profile/".concat(t._id),children:Object(f.jsx)("div",{className:"flex items-center justify-center",children:Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:t.photo,alt:"",className:"h-24 w-24 rounded-full"})})}),Object(f.jsxs)("div",{className:"text-center mt-3",children:[Object(f.jsx)("h1",{children:t.username}),o?Object(f.jsx)(Q.a,{color:"success"}):Object(f.jsx)(E.a,{children:x?Object(f.jsx)(qe.a,{color:"error",onClick:function(){return e=t._id,l(!0),void d.a.put("http://54.205.19.94/server/api/unfollow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(e){l(!1),m(!1)})).catch((function(e){l(!1)}));var e}}):Object(f.jsx)(Ve.a,{onClick:function(){return e=t._id,l(!0),void d.a.put("http://54.205.19.94/server/api/follow/user/".concat(e),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(e){l(!1),m(!0)})).catch((function(e){l(!1),console.log(e)}));var e},className:!0})})]})]})})},Yt=function(e){var t=e.flex,c=e.followers,n=e.following,a=Object(f.jsx)("div",{className:"mt-24",children:Object(f.jsx)("h1",{className:"text-3xl",children:"No Followers"})});return Object(f.jsx)("div",{className:"".concat(t," min-h-withoutHeader  w-full"),children:Object(f.jsxs)("div",{className:"flex justify-evenly flex-wrap",children:[0==c.length&&a,c.map((function(e){return Object(f.jsx)(Zt,{userData:e,Following:n})}))]})})},Gt=function(){var e,t=Object(o.g)(),c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1],l=Object(n.useState)([]),u=Object(r.a)(l,2),j=u[0],h=u[1],b=localStorage.getItem("userChecking");return b&&(e=p(b)),Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){var t=e.data.result[0],c=e.data.result[0];t=t?t.followersData:[],c=c?c.FollowingUsersData:[],h(t),i(c)}))}),[]),e?Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(Le,{flex:"flex-1"}),Object(f.jsx)(Yt,{flex:"flex-3",followers:j,following:s,setFollowing:i}),Object(f.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},Kt=function(e){var t=e.i,c=e.setFollowing,a=Object(n.useState)(!1),s=Object(r.a)(a,2),o=s[0],l=s[1],u=localStorage.getItem("userChecking"),j=p(u);return Object(f.jsx)("div",{className:"m-4",children:Object(f.jsxs)("div",{className:"w-52  shadow  h-60 p-4 flex flex-col items-center justify-center rounded-3xl ",children:[Object(f.jsx)(i.b,{to:"/user/profile/".concat(t._id),children:Object(f.jsx)("div",{className:"flex items-center justify-center",children:Object(f.jsx)("img",{onError:function(e){e.target.onerror=null,e.target.src="https://media.istockphoto.com/photos/colorful-gradient-pink-magenta-abstract-background-picture-id1059836414?k=20&m=1059836414&s=170667a&w=0&h=5WVpLbctBNZo406v7r8UmuuPbkyE-lwhDcJTfqgP_hE="},src:t.photo,alt:"",className:"h-24 w-24 rounded-full"})})}),Object(f.jsxs)("div",{className:"text-center mt-3",children:[Object(f.jsx)("h1",{children:t.username}),o?Object(f.jsx)(Q.a,{}):Object(f.jsx)(E.a,{children:Object(f.jsx)(qe.a,{onClick:function(){return e=t._id,l(!0),void d.a.put("http://54.205.19.94/server/api/unfollow/user/".concat(t._id),{},{headers:{Authorization:"Bearer ".concat(j.token)}}).then((function(t){l(!1),c((function(t){return t.filter((function(t){return t._id!==e}))}))})).catch((function(e){l(!1)}));var e}})})]})]})})},Qt=function(e){var t=e.flex,c=e.following,n=e.setFollowing,a=Object(f.jsx)("div",{className:"mt-24",children:Object(f.jsx)("h1",{className:"text-3xl",children:"No Following"})});return Object(f.jsx)("div",{className:"".concat(t," min-h-withoutHeader  w-full"),children:Object(f.jsxs)("div",{className:"flex justify-evenly flex-wrap",children:[0==c.length&&a,c.map((function(e){return Object(f.jsx)(Kt,{i:e,setFollowing:n})}))]})})},Xt=function(){var e,t=Object(o.g)(),c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1],l=localStorage.getItem("userChecking");return l&&(e=p(l)),Object(n.useEffect)((function(){d.a.get("http://54.205.19.94/server/api/user/network/data",{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){var t=e.data.result[0]?e.data.result[0].FollowingUsersData:[];i(t)}))}),[]),e?Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(Le,{flex:"flex-1"}),Object(f.jsx)(Qt,{flex:"flex-3",following:s,setFollowing:i}),Object(f.jsx)(Ge,{flex:"flex-1"})]}):(t.push("/signin"),!0)},$t=function(e){var t=e.currentUser,c=e.conversation,a=e.getMessage,s=Object(n.useState)(null),i=Object(r.a)(s,2),o=i[0],l=i[1],u=t.user._id;return Object(n.useEffect)((function(){var e=c.members.find((function(e){return e!==u})),n=function(){var c=Object(De.a)(_e.a.mark((function c(){var n;return _e.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,d.a.get("http://54.205.19.94/server/api/get/user/details/".concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}});case 2:n=c.sent,l(n.data.user);case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();n()}),[]),Object(f.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",children:[Object(f.jsxs)("div",{className:"flex space-x-4 items-center",onClick:function(){return a(c._id,o)},children:[o&&Object(f.jsx)("img",{src:o.photo||"https://www.kindpng.com/picc/m/252-2524695_dummy-profile-image-jpg-hd-png-download.png",className:"h-8 w-8 rounded-full",alt:""}),o&&Object(f.jsx)("h1",{children:o.username})]}),o&&Object(f.jsx)(v.b,{color:"green"})]})},ec=function(e){var t=e.flex,c=e.getMessage,a=e.conversation,s=e.setConversations,r=localStorage.getItem("userChecking"),i=p(r);return Object(n.useEffect)((function(){var e=function(){var e=Object(De.a)(_e.a.mark((function e(){var t;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("http://54.205.19.94/server/api/get/conversation",{headers:{Authorization:"Bearer ".concat(i.token)}});case 3:t=e.sent,s(t.data.result),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsx)("div",{className:"min-h-withoutHeader bg-white-100   p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(f.jsx)("div",{className:" h-96 p-4 space-y-5",children:null===a||void 0===a?void 0:a.map((function(e,t){return Object(f.jsx)($t,{getMessage:c,conversation:e,currentUser:i},t)}))})})})},tc=function(e){var t=e.messages,c=e.currentUser,a=e.setMessage,s=e.conversationId,i=e.currentFriend,o=e.socket,u=Object(n.useState)(""),j=Object(r.a)(u,2),h=j[0],b=j[1],x=Object(n.useRef)(null);Object(n.useEffect)((function(){x&&x.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[t]);var m=function(){var e=Object(De.a)(_e.a.mark((function e(t){var n,r;return _e.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={conversationId:s,sender:c.user._id,text:h},e.prev=2,e.next=5,d.a.post("http://54.205.19.94/server/api/post/meesages",n,{headers:{Authorization:"Bearer ".concat(c.token)}});case 5:r=e.sent,o.current.emit("sendMessage",{senderId:c.user._id,reciverId:i._id,text:h}),a((function(e){return[].concat(Object(l.a)(e),[r.data])})),b(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:" min-h-chatHeight p-4 rounded-2xl bg-white-100",children:[Object(f.jsxs)("div",{className:"flex items-center space-x-3 ",children:[Object(f.jsx)("img",{src:i.photo||"https://www.kindpng.com/picc/m/252-2524695_dummy-profile-image-jpg-hd-png-download.png",className:"rounded-full w-14 h-14",alt:""}),Object(f.jsx)("h1",{children:i.username})]}),Object(f.jsx)("hr",{className:"mt-3"}),Object(f.jsx)("div",{className:"overflow-auto p-6   rounded",ref:x,style:{maxHeight:"600px",minHeight:"600px"},children:t.map((function(e,t){return Object(f.jsx)(Me,{m:e,own:e.sender===c.user._id},t)}))}),Object(f.jsx)("div",{className:"  flex w-auto items-center mt-4 h-24 pb-4",children:Object(f.jsxs)("form",{onSubmit:m,className:"flex bg-white shadow  h-24 p-6 items-center w-full h-auto rounded-full",children:[Object(f.jsx)("input",{type:"text",value:h,onChange:function(e){return b(e.target.value)},className:"w-full h-10 outline-none ml-7 ",style:{background:"none"}}),Object(f.jsx)("button",{className:"p-3 p-x-6  text-white bg-pink rounded-full",children:"Send"})]})})]})})},cc=function(e){var t=e.flex,c=e.messages,n=e.openChat,a=e.currentUser,s=e.setMessage,r=e.conversationId,i=e.currentFriend,o=e.socket;return Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsx)("div",{className:"min-h-withoutHeader  p-6    max-h-48 w-1/2  fixed overflow-hidden ",children:n?Object(f.jsx)(tc,{messages:c,socket:o,currentFriend:i,conversationId:r,currentUser:a,setMessage:s}):Object(f.jsx)("div",{className:" min-h-withoutHeader flex items-center text-center justify-center",children:Object(f.jsx)("h1",{className:"text-8xl text-gray-300 ",children:"Open A Message !"})})})})},nc=function(e){var t=e.flex;e.onlineUsers,e.conversation,e.getAllMessages,e.currentUser;return Object(f.jsx)("div",{className:"".concat(t," "),children:Object(f.jsx)("div",{className:"min-h-withoutHeader bg-white-100  p-6 max-h-48 w-1/4 fixed overflow-auto ",children:Object(f.jsx)("div",{className:" h-96 p-4"})})})},ac=function(){var e,t,c=Object(o.g)(),a=(Object(n.useContext)(Ae).changeChattingDetails,Object(n.useState)([])),s=Object(r.a)(a,2),i=s[0],u=s[1],j=Object(n.useState)(null),h=Object(r.a)(j,2),b=h[0],x=h[1],m=Object(n.useState)(!1),O=Object(r.a)(m,2),g=O[0],v=O[1],w=Object(n.useState)(""),N=Object(r.a)(w,2),k=N[0],y=N[1],C=Object(n.useState)(null),S=Object(r.a)(C,2),z=S[0],I=S[1],_=Object(n.useState)([]),D=Object(r.a)(_,2),E=D[0],P=D[1],B=Object(n.useState)([]),A=Object(r.a)(B,2),F=A[0],T=A[1],L=Object(n.useRef)(),U=localStorage.getItem("userChecking");if(U&&(t=p(U)),Object(n.useEffect)((function(){L.current=Object(He.a)("ws://54.205.19.94/websocket",{transports:["websocket"],rejectUnauthorized:!1}),L.current.on("getMessage",(function(e){x({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(n.useEffect)((function(){b&&z._id==b.sender&&u((function(e){return[].concat(Object(l.a)(e),[b])}))}),[b]),Object(n.useEffect)((function(){L.current.emit("addUser",t.user._id),L.current.on("getUser",(function(e){P(e)}))}),[]),Object(n.useEffect)((function(){return function(){L.current.emit("disconnet",t.user._id)}}),[]),!t)return c.push("/signin"),!0;var M=function(e,c){d.a.get("http://54.205.19.94/server/api/get/meesages/".concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(t){I(c),y(e),v(!0),u(t.data.result||[])})).catch((function(e){console.log(e)}))};return Object(f.jsxs)("div",{className:"space-x-6 flex min-w-full   min-h-withoutHeader  mt-24   justify-between ",children:[Object(f.jsx)(ec,{getMessage:M,conversation:F,setConversations:T,flex:"flex-1"}),Object(f.jsx)(cc,{messages:i,socket:L,openChat:g,currentFriend:z,currentUser:t,conversationId:k,setMessage:u,flex:"flex-3"}),Object(f.jsx)(nc,(e={onlineUsers:E,getMessage:M,conversation:F},Object(Qe.a)(e,"conversation",F),Object(Qe.a)(e,"currentUser",t),Object(Qe.a)(e,"flex","flex-1"),e))]})},sc=function(){var e,t=Object(n.useState)(null),c=Object(r.a)(t,2),a=c[0],s=c[1],l=Object(n.useState)(null),u=Object(r.a)(l,2),d=u[0],j=u[1],h=localStorage.getItem("userChecking");h&&(e=p(h));return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(ht.Provider,{value:{userDataFromDatabase:d,setUserDataFromServer:j},children:Object(f.jsxs)(Ae.Provider,{value:{chatDetails:a,changeChattingDetails:s},children:[e||d?Object(f.jsx)(z,{}):void 0,Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/",exact:!0,component:Ke}),Object(f.jsx)(o.b,{path:"/signin",exact:!0,component:pt}),Object(f.jsx)(o.b,{path:"/profile/",component:Ht}),Object(f.jsx)(o.b,{path:"/logout",component:ft}),Object(f.jsx)(o.b,{path:"/user/profile/:userId",component:qt}),Object(f.jsx)(o.b,{path:"/followers",component:Gt}),Object(f.jsx)(o.b,{path:"/following",component:Xt}),Object(f.jsx)(o.b,{path:"/message",component:ac})]})]})})})})};s.a.render(Object(f.jsx)(sc,{}),document.getElementById("root"))}},[[382,14,15]]]);
//# sourceMappingURL=main.c843cd7a.chunk.js.map